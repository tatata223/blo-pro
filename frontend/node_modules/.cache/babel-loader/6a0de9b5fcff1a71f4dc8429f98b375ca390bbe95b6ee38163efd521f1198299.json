{"ast":null,"code":"import React,{useState,useEffect}from'react';import{tasksAPI}from'../../api/api';import TaskCard from'./TaskCard';import toast from'react-hot-toast';import Layout from'../Layout/Layout';import'./DailyTasks.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DailyTasks=()=>{const[tasks,setTasks]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('daily');useEffect(()=>{loadTasks();},[filter]);const loadTasks=async()=>{try{const response=await tasksAPI.getDailyTasks(filter);setTasks(response.data);}catch(error){console.error('Error loading tasks:',error);}finally{setLoading(false);}};const handleTaskComplete=async taskId=>{try{await tasksAPI.completeTask(taskId);toast.success('Задание выполнено! Валюту начислено.');loadTasks();}catch(error){var _error$response,_error$response$data;console.error('Error completing task:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Ошибка выполнения задания');}};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"daily-tasks\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"daily-tasks-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0417\\u0430\\u0434\\u0430\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"daily-tasks-filter-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"task-filter-tab \".concat(filter==='daily'?'active':''),onClick:()=>setFilter('daily'),children:\"\\u0415\\u0436\\u0435\\u0434\\u043D\\u0435\\u0432\\u043D\\u044B\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{className:\"task-filter-tab \".concat(filter==='weekly'?'active':''),onClick:()=>setFilter('weekly'),children:\"\\u0415\\u0436\\u0435\\u043D\\u0435\\u0434\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{className:\"task-filter-tab \".concat(filter==='special'?'active':''),onClick:()=>setFilter('special'),children:\"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435\"})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"daily-tasks-loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u0439...\"}):tasks.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"daily-tasks-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u0439\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"daily-tasks-grid\",children:tasks.map(task=>/*#__PURE__*/_jsx(TaskCard,{task:task,onComplete:handleTaskComplete},task.id))})]})});};export default DailyTasks;","map":{"version":3,"names":["React","useState","useEffect","tasksAPI","TaskCard","toast","Layout","jsx","_jsx","jsxs","_jsxs","DailyTasks","tasks","setTasks","loading","setLoading","filter","setFilter","loadTasks","response","getDailyTasks","data","error","console","handleTaskComplete","taskId","completeTask","success","_error$response","_error$response$data","children","className","concat","onClick","length","map","task","onComplete","id"],"sources":["/Users/mikhail/Downloads/blo-pro/frontend/src/components/Tasks/DailyTasks.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { tasksAPI } from '../../api/api';\nimport TaskCard from './TaskCard';\nimport toast from 'react-hot-toast';\nimport Layout from '../Layout/Layout';\nimport './DailyTasks.css';\n\nconst DailyTasks = () => {\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('daily');\n\n  useEffect(() => {\n    loadTasks();\n  }, [filter]);\n\n  const loadTasks = async () => {\n    try {\n      const response = await tasksAPI.getDailyTasks(filter);\n      setTasks(response.data);\n    } catch (error) {\n      console.error('Error loading tasks:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTaskComplete = async (taskId) => {\n    try {\n      await tasksAPI.completeTask(taskId);\n      toast.success('Задание выполнено! Валюту начислено.');\n      loadTasks();\n    } catch (error) {\n      console.error('Error completing task:', error);\n      toast.error(error.response?.data?.error || 'Ошибка выполнения задания');\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"daily-tasks\">\n      <div className=\"daily-tasks-header\">\n        <h1>Задания</h1>\n        <div className=\"daily-tasks-filter-tabs\">\n          <button\n            className={`task-filter-tab ${filter === 'daily' ? 'active' : ''}`}\n            onClick={() => setFilter('daily')}\n          >\n            Ежедневные\n          </button>\n          <button\n            className={`task-filter-tab ${filter === 'weekly' ? 'active' : ''}`}\n            onClick={() => setFilter('weekly')}\n          >\n            Еженедельные\n          </button>\n          <button\n            className={`task-filter-tab ${filter === 'special' ? 'active' : ''}`}\n            onClick={() => setFilter('special')}\n          >\n            Специальные\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"daily-tasks-loading\">Загрузка заданий...</div>\n      ) : tasks.length === 0 ? (\n        <div className=\"daily-tasks-empty\">\n          <p>Нет доступных заданий</p>\n        </div>\n      ) : (\n        <div className=\"daily-tasks-grid\">\n          {tasks.map(task => (\n            <TaskCard\n              key={task.id}\n              task={task}\n              onComplete={handleTaskComplete}\n            />\n          ))}\n        </div>\n      )}\n      </div>\n    </Layout>\n  );\n};\n\nexport default DailyTasks;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}