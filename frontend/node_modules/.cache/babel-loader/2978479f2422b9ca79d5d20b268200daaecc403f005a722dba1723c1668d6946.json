{"ast":null,"code":"import React,{useRef,useEffect,useState,useCallback}from'react';import ReactQuill from'react-quill';import'react-quill/dist/quill.snow.css';import'./RichTextEditor.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RichTextEditor=_ref=>{let{value,onChange,placeholder='Начните писать вашу заметку...',autoFocus=false}=_ref;const quillRef=useRef(null);const[wordCount,setWordCount]=useState(0);const[charCount,setCharCount]=useState(0);const modules={toolbar:[[{'header':[1,2,3,false]}],['bold','italic','underline','strike'],[{'color':[]},{'background':[]}],[{'list':'ordered'},{'list':'bullet'}],[{'align':[]}],['link','image'],['clean']]};const formats=['header','bold','italic','underline','strike','color','background','list','bullet','align','link','image'];const handleChange=useCallback((content,delta,source,editor)=>{const text=editor.getText();const words=text.trim().split(/\\s+/).filter(word=>word.length>0);setWordCount(words.length);setCharCount(text.length);onChange(content);},[onChange]);useEffect(()=>{if(value){var _quillRef$current,_quillRef$current$get;const text=((_quillRef$current=quillRef.current)===null||_quillRef$current===void 0?void 0:(_quillRef$current$get=_quillRef$current.getEditor())===null||_quillRef$current$get===void 0?void 0:_quillRef$current$get.getText())||'';const words=text.trim().split(/\\s+/).filter(word=>word.length>0);setWordCount(words.length);setCharCount(text.length);}},[value]);// Auto-focus при монтировании компонента\nuseEffect(()=>{if(autoFocus&&quillRef.current){const editor=quillRef.current.getEditor();if(editor){// Небольшая задержка для гарантии, что редактор полностью инициализирован\nsetTimeout(()=>{editor.focus();},100);}}},[autoFocus]);return/*#__PURE__*/_jsxs(\"div\",{className:\"rich-text-editor\",children:[/*#__PURE__*/_jsx(ReactQuill,{ref:quillRef,theme:\"snow\",value:value||'',onChange:handleChange,modules:modules,formats:formats,placeholder:placeholder,className:\"quill-editor\"}),/*#__PURE__*/_jsx(\"div\",{className:\"editor-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"editor-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[wordCount,\" \\u0441\\u043B\\u043E\\u0432\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[charCount,\" \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432\"]})]})})]});};export default RichTextEditor;","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","ReactQuill","jsx","_jsx","jsxs","_jsxs","RichTextEditor","_ref","value","onChange","placeholder","autoFocus","quillRef","wordCount","setWordCount","charCount","setCharCount","modules","toolbar","formats","handleChange","content","delta","source","editor","text","getText","words","trim","split","filter","word","length","_quillRef$current","_quillRef$current$get","current","getEditor","setTimeout","focus","className","children","ref","theme"],"sources":["/Users/mikhail/Downloads/ЗаметкиPARADIZE/frontend/src/components/Notes/RichTextEditor.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport './RichTextEditor.css';\n\nconst RichTextEditor = ({ value, onChange, placeholder = 'Начните писать вашу заметку...', autoFocus = false }) => {\n  const quillRef = useRef(null);\n  const [wordCount, setWordCount] = useState(0);\n  const [charCount, setCharCount] = useState(0);\n\n  const modules = {\n    toolbar: [\n      [{ 'header': [1, 2, 3, false] }],\n      ['bold', 'italic', 'underline', 'strike'],\n      [{ 'color': [] }, { 'background': [] }],\n      [{ 'list': 'ordered'}, { 'list': 'bullet' }],\n      [{ 'align': [] }],\n      ['link', 'image'],\n      ['clean']\n    ],\n  };\n\n  const formats = [\n    'header',\n    'bold', 'italic', 'underline', 'strike',\n    'color', 'background',\n    'list', 'bullet',\n    'align',\n    'link', 'image'\n  ];\n\n  const handleChange = useCallback((content, delta, source, editor) => {\n    const text = editor.getText();\n    const words = text.trim().split(/\\s+/).filter(word => word.length > 0);\n    setWordCount(words.length);\n    setCharCount(text.length);\n    onChange(content);\n  }, [onChange]);\n\n  useEffect(() => {\n    if (value) {\n      const text = quillRef.current?.getEditor()?.getText() || '';\n      const words = text.trim().split(/\\s+/).filter(word => word.length > 0);\n      setWordCount(words.length);\n      setCharCount(text.length);\n    }\n  }, [value]);\n\n  // Auto-focus при монтировании компонента\n  useEffect(() => {\n    if (autoFocus && quillRef.current) {\n      const editor = quillRef.current.getEditor();\n      if (editor) {\n        // Небольшая задержка для гарантии, что редактор полностью инициализирован\n        setTimeout(() => {\n          editor.focus();\n        }, 100);\n      }\n    }\n  }, [autoFocus]);\n\n  return (\n    <div className=\"rich-text-editor\">\n      <ReactQuill\n        ref={quillRef}\n        theme=\"snow\"\n        value={value || ''}\n        onChange={handleChange}\n        modules={modules}\n        formats={formats}\n        placeholder={placeholder}\n        className=\"quill-editor\"\n      />\n      <div className=\"editor-footer\">\n        <div className=\"editor-stats\">\n          <span>{wordCount} слов</span>\n          <span>{charCount} символов</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RichTextEditor;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}