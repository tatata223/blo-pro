{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{templatesAPI}from'../../api/api';import'./CreateNoteDropdown.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CreateNoteDropdown=_ref=>{let{isOpen,onClose,onCreateNote,onSelectTemplate}=_ref;const[templates,setTemplates]=useState([]);const[loading,setLoading]=useState(false);const dropdownRef=useRef(null);useEffect(()=>{if(isOpen){loadTemplates();// Закрываем при клике вне меню\nconst handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){onClose();}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};}},[isOpen,onClose]);const loadTemplates=async()=>{try{var _response$data;setLoading(true);const response=await templatesAPI.getAll();const templatesData=Array.isArray(response.data)?response.data:((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.results)||[];setTemplates(templatesData);}catch(error){console.error('Error loading templates:',error);setTemplates([]);}finally{setLoading(false);}};const handleNewNote=()=>{onCreateNote();onClose();};const handleTemplateSelect=template=>{onSelectTemplate(template);onClose();};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"create-note-dropdown\",ref:dropdownRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown-item new-note-item\",onClick:handleNewNote,children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\",stroke:\"currentColor\",strokeWidth:\"2.5\",strokeLinecap:\"round\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u041D\\u043E\\u0432\\u0430\\u044F\"})]}),templates.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-divider\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"templates-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"templates-label\",children:\"\\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\\u044B\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"templates-loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"}):templates.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"templates-empty\",children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u043E\\u0432\"}):/*#__PURE__*/_jsx(\"div\",{className:\"templates-list\",children:templates.map(template=>/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown-item template-item\",onClick:()=>handleTemplateSelect(template),children:[/*#__PURE__*/_jsx(\"div\",{className:\"template-icon-small\",dangerouslySetInnerHTML:{__html:template.icon_svg||''}}),/*#__PURE__*/_jsxs(\"div\",{className:\"template-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"template-name-small\",children:template.name}),template.category&&/*#__PURE__*/_jsx(\"span\",{className:\"template-category-small\",children:template.category})]})]},template.id))})]})]})]})});};export default CreateNoteDropdown;","map":{"version":3,"names":["React","useState","useEffect","useRef","templatesAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreateNoteDropdown","_ref","isOpen","onClose","onCreateNote","onSelectTemplate","templates","setTemplates","loading","setLoading","dropdownRef","loadTemplates","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","_response$data","response","getAll","templatesData","Array","isArray","data","results","error","console","handleNewNote","handleTemplateSelect","template","className","ref","children","onClick","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","length","map","dangerouslySetInnerHTML","__html","icon_svg","name","category","id"],"sources":["/Users/mikhail/Downloads/ЗаметкиPARADIZE/frontend/src/components/Header/CreateNoteDropdown.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { templatesAPI } from '../../api/api';\nimport './CreateNoteDropdown.css';\n\nconst CreateNoteDropdown = ({ isOpen, onClose, onCreateNote, onSelectTemplate }) => {\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const dropdownRef = useRef(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      loadTemplates();\n      // Закрываем при клике вне меню\n      const handleClickOutside = (event) => {\n        if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n          onClose();\n        }\n      };\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n      };\n    }\n  }, [isOpen, onClose]);\n\n  const loadTemplates = async () => {\n    try {\n      setLoading(true);\n      const response = await templatesAPI.getAll();\n      const templatesData = Array.isArray(response.data) ? response.data : \n                           (response.data?.results || []);\n      setTemplates(templatesData);\n    } catch (error) {\n      console.error('Error loading templates:', error);\n      setTemplates([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleNewNote = () => {\n    onCreateNote();\n    onClose();\n  };\n\n  const handleTemplateSelect = (template) => {\n    onSelectTemplate(template);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"create-note-dropdown\" ref={dropdownRef}>\n      <div className=\"dropdown-content\">\n        <button \n          className=\"dropdown-item new-note-item\"\n          onClick={handleNewNote}\n        >\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M12 5V19M5 12H19\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\"/>\n          </svg>\n          <span>Новая</span>\n        </button>\n        {templates.length > 0 && (\n          <>\n            <div className=\"dropdown-divider\"></div>\n            <div className=\"templates-section\">\n              <div className=\"templates-label\">Шаблоны</div>\n          {loading ? (\n            <div className=\"templates-loading\">Загрузка...</div>\n          ) : templates.length === 0 ? (\n            <div className=\"templates-empty\">Нет доступных шаблонов</div>\n          ) : (\n            <div className=\"templates-list\">\n              {templates.map(template => (\n                <button\n                  key={template.id}\n                  className=\"dropdown-item template-item\"\n                  onClick={() => handleTemplateSelect(template)}\n                >\n                  <div \n                    className=\"template-icon-small\"\n                    dangerouslySetInnerHTML={{ __html: template.icon_svg || '' }}\n                  />\n                  <div className=\"template-info\">\n                    <span className=\"template-name-small\">{template.name}</span>\n                    {template.category && (\n                      <span className=\"template-category-small\">{template.category}</span>\n                    )}\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CreateNoteDropdown;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}