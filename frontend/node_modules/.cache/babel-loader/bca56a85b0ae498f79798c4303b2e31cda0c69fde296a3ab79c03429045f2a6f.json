{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import toast from'react-hot-toast';import{useKeyboardShortcuts}from'../../hooks/useKeyboardShortcuts';import RichTextEditor from'./RichTextEditor';import useTypingTracker from'../Statistics/TypingTracker';import EncryptionSettings from'./EncryptionSettings';import ExportModal from'../Export/ExportModal';import'./NoteEditor.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NoteEditor=_ref=>{var _note$tags;let{note,folders,tags,onSave,onCancel}=_ref;const[title,setTitle]=useState((note===null||note===void 0?void 0:note.title)||'');const[content,setContent]=useState((note===null||note===void 0?void 0:note.content)||'');const[selectedFolder,setSelectedFolder]=useState((note===null||note===void 0?void 0:note.folder)||null);const[selectedTags,setSelectedTags]=useState((note===null||note===void 0?void 0:(_note$tags=note.tags)===null||_note$tags===void 0?void 0:_note$tags.map(t=>t.id))||[]);const[attachment,setAttachment]=useState(null);const[attachmentFile,setAttachmentFile]=useState(null);const[saving,setSaving]=useState(false);const[saveStatus,setSaveStatus]=useState('saved');// 'saved', 'saving', 'unsaved'\nconst[typingSpeed,setTypingSpeed]=useState({wpm:0,cpm:0});const[showExportModal,setShowExportModal]=useState(false);const autoSaveTimerRef=useRef(null);const fileInputRef=useRef(null);// Инициализация TypingTracker\nconst typingTracker=useTypingTracker((note===null||note===void 0?void 0:note.id)||null,speed=>{setTypingSpeed(speed);});useEffect(()=>{if(note){var _note$tags2;setTitle(note.title||'');setContent(note.content||'');setSelectedFolder(note.folder||null);setSelectedTags(((_note$tags2=note.tags)===null||_note$tags2===void 0?void 0:_note$tags2.map(t=>t.id))||[]);setAttachment(note.attachment||null);}},[note]);const handleAutoSave=useCallback(async()=>{if(!title.trim()&&!content.trim())return;setSaveStatus('saving');try{await onSave({title:title.trim()||'Без названия',content:content,folder:selectedFolder||null,tag_ids:selectedTags});setSaveStatus('saved');}catch(error){console.error('Error auto-saving note:',error);setSaveStatus('unsaved');}},[title,content,selectedFolder,selectedTags,onSave]);// Автосохранение каждые 30 секунд\nuseEffect(()=>{if(autoSaveTimerRef.current){clearInterval(autoSaveTimerRef.current);}if(content&&title){autoSaveTimerRef.current=setInterval(()=>{handleAutoSave();},30000);// 30 секунд\n}return()=>{if(autoSaveTimerRef.current){clearInterval(autoSaveTimerRef.current);}};},[content,title,selectedFolder,selectedTags,handleAutoSave]);const handleFileSelect=e=>{const file=e.target.files[0];if(file){if(file.size>10*1024*1024){toast.error('Размер файла не должен превышать 10 МБ');return;}setAttachmentFile(file);}};const handleSave=useCallback(async()=>{setSaving(true);setSaveStatus('saving');try{const saveData={title:title.trim()||'Без названия',content:content,folder:selectedFolder||null,tag_ids:selectedTags};// Если есть новый файл, добавляем его\nif(attachmentFile){const formData=new FormData();Object.keys(saveData).forEach(key=>{if(saveData[key]!==null&&saveData[key]!==undefined){if(Array.isArray(saveData[key])){saveData[key].forEach(item=>formData.append(key,item));}else{formData.append(key,saveData[key]);}}});formData.append('attachment',attachmentFile);await onSave(formData,true);}else{await onSave(saveData);}setSaveStatus('saved');setAttachmentFile(null);if(fileInputRef.current){fileInputRef.current.value='';}toast.success('Заметка сохранена');}catch(error){console.error('Error saving note:',error);setSaveStatus('unsaved');toast.error('Ошибка при сохранении заметки');}finally{setSaving(false);}},[title,content,selectedFolder,selectedTags,attachmentFile,onSave]);// Клавиатурные сокращения для редактора\nuseKeyboardShortcuts({'ctrl+s':e=>{e.preventDefault();handleSave();},'escape':()=>{onCancel();}},[handleSave,onCancel]);const toggleTag=tagId=>{if(selectedTags.includes(tagId)){setSelectedTags(selectedTags.filter(id=>id!==tagId));}else{setSelectedTags([...selectedTags,tagId]);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"note-editor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editor-header\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"editor-title\",placeholder:\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0438\",value:title,onChange:e=>{setTitle(e.target.value);setSaveStatus('unsaved');}}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"save-status\",children:[saveStatus==='saved'&&/*#__PURE__*/_jsxs(\"span\",{className:\"status-indicator saved\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"#22C55E\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M8 12L11 15L16 9\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})]}),\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u043E\"]}),saveStatus==='saving'&&/*#__PURE__*/_jsxs(\"span\",{className:\"status-indicator saving\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"#EAB308\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 6V12L16 14\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\"})]}),\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435...\"]}),saveStatus==='unsaved'&&/*#__PURE__*/_jsxs(\"span\",{className:\"status-indicator unsaved\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"#9CA3AF\"})}),\"\\u041D\\u0435 \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u043E\"]})]}),(note===null||note===void 0?void 0:note.id)&&/*#__PURE__*/_jsx(EncryptionSettings,{note:note,onEncryptionChange:(isEncrypted,decryptedContent)=>{if(decryptedContent!==undefined){setContent(decryptedContent);}// Обновляем заметку, чтобы отразить изменение статуса шифрования\nif(note){note.is_encrypted=isEncrypted;}}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-export\",onClick:()=>setShowExportModal(true),title:\"\\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442\",disabled:!(note!==null&&note!==void 0&&note.id),children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15M17 8L12 3M12 3L7 8M12 3V15\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-save\",onClick:handleSave,disabled:saving,title:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"28\",height:\"28\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20 6L9 17L4 12\",stroke:\"currentColor\",strokeWidth:\"2.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel\",onClick:onCancel,title:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"28\",height:\"28\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18 6L6 18M6 6L18 18\",stroke:\"currentColor\",strokeWidth:\"2.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})})]})]}),/*#__PURE__*/_jsx(RichTextEditor,{value:content,onChange:newContent=>{setContent(newContent);setSaveStatus('unsaved');// Отслеживание печати\nif(typingTracker&&typingTracker.handleKeystroke){// Получаем текстовое содержимое без HTML тегов\nconst tempDiv=document.createElement('div');tempDiv.innerHTML=newContent;const textContent=tempDiv.textContent||tempDiv.innerText||'';typingTracker.handleKeystroke(textContent);}},placeholder:\"\",autoFocus:!note}),typingSpeed.wpm>0&&/*#__PURE__*/_jsx(\"div\",{className:\"typing-speed-indicator\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0421\\u043A\\u043E\\u0440\\u043E\\u0441\\u0442\\u044C: \",typingSpeed.wpm,\" WPM / \",typingSpeed.cpm,\" CPM\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editor-section\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u043B\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0444\\u0430\\u0439\\u043B:\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",onChange:handleFileSelect,style:{display:'none'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[attachment&&!attachmentFile&&/*#__PURE__*/_jsxs(\"a\",{href:attachment,target:\"_blank\",rel:\"noopener noreferrer\",style:{flex:1,padding:'8px 12px',background:'var(--bg-secondary)',borderRadius:'8px',textDecoration:'none',color:'var(--text-color)',fontSize:'13px'},children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",style:{display:'inline-block',marginRight:'6px',verticalAlign:'middle'},children:[/*#__PURE__*/_jsx(\"path\",{d:\"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M14 2V8H20\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})]}),\"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0444\\u0430\\u0439\\u043B\"]}),attachmentFile&&/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,padding:'8px 12px',background:'var(--primary-color)',borderRadius:'8px',color:'white',fontSize:'13px',display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:attachmentFile.name}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setAttachmentFile(null);if(fileInputRef.current)fileInputRef.current.value='';},style:{background:'none',border:'none',color:'white',cursor:'pointer',padding:'0',marginLeft:'8px',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18 6L6 18M6 6L18 18\",stroke:\"currentColor\",strokeWidth:\"2.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},style:{padding:'8px 16px',background:'var(--bg-secondary)',border:'1px solid var(--border-color)',borderRadius:'8px',cursor:'pointer',color:'var(--text-color)',fontSize:'13px'},children:attachment||attachmentFile?'Изменить':'Прикрепить файл'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-section\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u0430\\u043F\\u043A\\u0430:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedFolder||'',onChange:e=>setSelectedFolder(e.target.value?parseInt(e.target.value):null),className:\"editor-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0411\\u0435\\u0437 \\u043F\\u0430\\u043F\\u043A\\u0438\"}),folders.map(folder=>/*#__PURE__*/_jsx(\"option\",{value:folder.id,children:folder.name},folder.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-section\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0422\\u0435\\u0433\\u0438:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tags-selector\",children:tags.map(tag=>/*#__PURE__*/_jsx(\"button\",{className:\"tag-selector-btn \".concat(selectedTags.includes(tag.id)?'active':''),onClick:()=>toggleTag(tag.id),style:{backgroundColor:selectedTags.includes(tag.id)?tag.color:'transparent',borderColor:tag.color,color:selectedTags.includes(tag.id)?'#fff':tag.color},children:tag.name},tag.id))})]})]}),/*#__PURE__*/_jsx(ExportModal,{note:note,isOpen:showExportModal,onClose:()=>setShowExportModal(false)})]});};export default NoteEditor;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","toast","useKeyboardShortcuts","RichTextEditor","useTypingTracker","EncryptionSettings","ExportModal","jsx","_jsx","jsxs","_jsxs","NoteEditor","_ref","_note$tags","note","folders","tags","onSave","onCancel","title","setTitle","content","setContent","selectedFolder","setSelectedFolder","folder","selectedTags","setSelectedTags","map","t","id","attachment","setAttachment","attachmentFile","setAttachmentFile","saving","setSaving","saveStatus","setSaveStatus","typingSpeed","setTypingSpeed","wpm","cpm","showExportModal","setShowExportModal","autoSaveTimerRef","fileInputRef","typingTracker","speed","_note$tags2","handleAutoSave","trim","tag_ids","error","console","current","clearInterval","setInterval","handleFileSelect","e","file","target","files","size","handleSave","saveData","formData","FormData","Object","keys","forEach","key","undefined","Array","isArray","item","append","value","success","preventDefault","escape","toggleTag","tagId","includes","filter","className","children","type","placeholder","onChange","width","height","viewBox","fill","xmlns","cx","cy","r","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","onEncryptionChange","isEncrypted","decryptedContent","is_encrypted","onClick","disabled","newContent","handleKeystroke","tempDiv","document","createElement","innerHTML","textContent","innerText","autoFocus","ref","style","display","gap","alignItems","href","rel","flex","padding","background","borderRadius","textDecoration","color","fontSize","marginRight","verticalAlign","justifyContent","name","border","cursor","marginLeft","_fileInputRef$current","click","parseInt","tag","concat","backgroundColor","borderColor","isOpen","onClose"],"sources":["/Users/mikhail/Downloads/ЗаметкиPARADIZE/frontend/src/components/Notes/NoteEditor.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport toast from 'react-hot-toast';\nimport { useKeyboardShortcuts } from '../../hooks/useKeyboardShortcuts';\nimport RichTextEditor from './RichTextEditor';\nimport useTypingTracker from '../Statistics/TypingTracker';\nimport EncryptionSettings from './EncryptionSettings';\nimport ExportModal from '../Export/ExportModal';\nimport './NoteEditor.css';\n\nconst NoteEditor = ({ note, folders, tags, onSave, onCancel }) => {\n  const [title, setTitle] = useState(note?.title || '');\n  const [content, setContent] = useState(note?.content || '');\n  const [selectedFolder, setSelectedFolder] = useState(note?.folder || null);\n  const [selectedTags, setSelectedTags] = useState(note?.tags?.map(t => t.id) || []);\n  const [attachment, setAttachment] = useState(null);\n  const [attachmentFile, setAttachmentFile] = useState(null);\n  const [saving, setSaving] = useState(false);\n  const [saveStatus, setSaveStatus] = useState('saved'); // 'saved', 'saving', 'unsaved'\n  const [typingSpeed, setTypingSpeed] = useState({ wpm: 0, cpm: 0 });\n  const [showExportModal, setShowExportModal] = useState(false);\n  const autoSaveTimerRef = useRef(null);\n  const fileInputRef = useRef(null);\n  \n  // Инициализация TypingTracker\n  const typingTracker = useTypingTracker(\n    note?.id || null,\n    (speed) => {\n      setTypingSpeed(speed);\n    }\n  );\n\n  useEffect(() => {\n    if (note) {\n      setTitle(note.title || '');\n      setContent(note.content || '');\n      setSelectedFolder(note.folder || null);\n      setSelectedTags(note.tags?.map(t => t.id) || []);\n      setAttachment(note.attachment || null);\n    }\n  }, [note]);\n\n  const handleAutoSave = useCallback(async () => {\n    if (!title.trim() && !content.trim()) return;\n    \n    setSaveStatus('saving');\n    try {\n      await onSave({\n        title: title.trim() || 'Без названия',\n        content: content,\n        folder: selectedFolder || null,\n        tag_ids: selectedTags,\n      });\n      setSaveStatus('saved');\n    } catch (error) {\n      console.error('Error auto-saving note:', error);\n      setSaveStatus('unsaved');\n    }\n  }, [title, content, selectedFolder, selectedTags, onSave]);\n\n  // Автосохранение каждые 30 секунд\n  useEffect(() => {\n    if (autoSaveTimerRef.current) {\n      clearInterval(autoSaveTimerRef.current);\n    }\n\n    if (content && title) {\n      autoSaveTimerRef.current = setInterval(() => {\n        handleAutoSave();\n      }, 30000); // 30 секунд\n    }\n\n    return () => {\n      if (autoSaveTimerRef.current) {\n        clearInterval(autoSaveTimerRef.current);\n      }\n    };\n  }, [content, title, selectedFolder, selectedTags, handleAutoSave]);\n\n  const handleFileSelect = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 10 * 1024 * 1024) {\n        toast.error('Размер файла не должен превышать 10 МБ');\n        return;\n      }\n      setAttachmentFile(file);\n    }\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    setSaveStatus('saving');\n    try {\n      const saveData = {\n        title: title.trim() || 'Без названия',\n        content: content,\n        folder: selectedFolder || null,\n        tag_ids: selectedTags,\n      };\n      \n      // Если есть новый файл, добавляем его\n      if (attachmentFile) {\n        const formData = new FormData();\n        Object.keys(saveData).forEach(key => {\n          if (saveData[key] !== null && saveData[key] !== undefined) {\n            if (Array.isArray(saveData[key])) {\n              saveData[key].forEach(item => formData.append(key, item));\n            } else {\n              formData.append(key, saveData[key]);\n            }\n          }\n        });\n        formData.append('attachment', attachmentFile);\n        await onSave(formData, true);\n      } else {\n        await onSave(saveData);\n      }\n      \n      setSaveStatus('saved');\n      setAttachmentFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      toast.success('Заметка сохранена');\n    } catch (error) {\n      console.error('Error saving note:', error);\n      setSaveStatus('unsaved');\n      toast.error('Ошибка при сохранении заметки');\n    } finally {\n      setSaving(false);\n    }\n  }, [title, content, selectedFolder, selectedTags, attachmentFile, onSave]);\n\n  // Клавиатурные сокращения для редактора\n  useKeyboardShortcuts({\n    'ctrl+s': (e) => {\n      e.preventDefault();\n      handleSave();\n    },\n    'escape': () => {\n      onCancel();\n    },\n  }, [handleSave, onCancel]);\n\n  const toggleTag = (tagId) => {\n    if (selectedTags.includes(tagId)) {\n      setSelectedTags(selectedTags.filter(id => id !== tagId));\n    } else {\n      setSelectedTags([...selectedTags, tagId]);\n    }\n  };\n\n  return (\n    <div className=\"note-editor\">\n      <div className=\"editor-header\">\n        <input\n          type=\"text\"\n          className=\"editor-title\"\n          placeholder=\"Заголовок заметки\"\n          value={title}\n          onChange={(e) => {\n            setTitle(e.target.value);\n            setSaveStatus('unsaved');\n          }}\n        />\n        <div className=\"editor-actions\">\n          <div className=\"save-status\">\n            {saveStatus === 'saved' && (\n              <span className=\"status-indicator saved\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#22C55E\"/>\n                  <path d=\"M8 12L11 15L16 9\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n                Сохранено\n              </span>\n            )}\n            {saveStatus === 'saving' && (\n              <span className=\"status-indicator saving\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#EAB308\"/>\n                  <path d=\"M12 6V12L16 14\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                </svg>\n                Сохранение...\n              </span>\n            )}\n            {saveStatus === 'unsaved' && (\n              <span className=\"status-indicator unsaved\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#9CA3AF\"/>\n                </svg>\n                Не сохранено\n              </span>\n            )}\n          </div>\n          {note?.id && (\n            <EncryptionSettings\n              note={note}\n              onEncryptionChange={(isEncrypted, decryptedContent) => {\n                if (decryptedContent !== undefined) {\n                  setContent(decryptedContent);\n                }\n                // Обновляем заметку, чтобы отразить изменение статуса шифрования\n                if (note) {\n                  note.is_encrypted = isEncrypted;\n                }\n              }}\n            />\n          )}\n          <button \n            className=\"btn-export\" \n            onClick={() => setShowExportModal(true)} \n            title=\"Экспорт\"\n            disabled={!note?.id}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15M17 8L12 3M12 3L7 8M12 3V15\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n          </button>\n          <button className=\"btn-save\" onClick={handleSave} disabled={saving} title=\"Сохранить\">\n            <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M20 6L9 17L4 12\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n          </button>\n          <button className=\"btn-cancel\" onClick={onCancel} title=\"Отмена\">\n            <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      <RichTextEditor\n        value={content}\n        onChange={(newContent) => {\n          setContent(newContent);\n          setSaveStatus('unsaved');\n          // Отслеживание печати\n          if (typingTracker && typingTracker.handleKeystroke) {\n            // Получаем текстовое содержимое без HTML тегов\n            const tempDiv = document.createElement('div');\n            tempDiv.innerHTML = newContent;\n            const textContent = tempDiv.textContent || tempDiv.innerText || '';\n            typingTracker.handleKeystroke(textContent);\n          }\n        }}\n        placeholder=\"\"\n        autoFocus={!note}\n      />\n      \n      {typingSpeed.wpm > 0 && (\n        <div className=\"typing-speed-indicator\">\n          <span>Скорость: {typingSpeed.wpm} WPM / {typingSpeed.cpm} CPM</span>\n        </div>\n      )}\n\n      <div className=\"editor-sidebar\">\n        <div className=\"editor-section\">\n          <label>Прикрепленный файл:</label>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            onChange={handleFileSelect}\n            style={{ display: 'none' }}\n          />\n          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n            {attachment && !attachmentFile && (\n              <a \n                href={attachment} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                style={{ \n                  flex: 1, \n                  padding: '8px 12px', \n                  background: 'var(--bg-secondary)', \n                  borderRadius: '8px',\n                  textDecoration: 'none',\n                  color: 'var(--text-color)',\n                  fontSize: '13px'\n                }}\n              >\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style={{ display: 'inline-block', marginRight: '6px', verticalAlign: 'middle' }}>\n                  <path d=\"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  <path d=\"M14 2V8H20\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n                Текущий файл\n              </a>\n            )}\n            {attachmentFile && (\n              <div style={{ \n                flex: 1, \n                padding: '8px 12px', \n                background: 'var(--primary-color)', \n                borderRadius: '8px',\n                color: 'white',\n                fontSize: '13px',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between'\n              }}>\n                <span>{attachmentFile.name}</span>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setAttachmentFile(null);\n                    if (fileInputRef.current) fileInputRef.current.value = '';\n                  }}\n                  style={{\n                    background: 'none',\n                    border: 'none',\n                    color: 'white',\n                    cursor: 'pointer',\n                    padding: '0',\n                    marginLeft: '8px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  }}\n                >\n                  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </button>\n              </div>\n            )}\n            <button\n              type=\"button\"\n              onClick={() => fileInputRef.current?.click()}\n              style={{\n                padding: '8px 16px',\n                background: 'var(--bg-secondary)',\n                border: '1px solid var(--border-color)',\n                borderRadius: '8px',\n                cursor: 'pointer',\n                color: 'var(--text-color)',\n                fontSize: '13px'\n              }}\n            >\n              {attachment || attachmentFile ? 'Изменить' : 'Прикрепить файл'}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"editor-section\">\n          <label>Папка:</label>\n          <select\n            value={selectedFolder || ''}\n            onChange={(e) => setSelectedFolder(e.target.value ? parseInt(e.target.value) : null)}\n            className=\"editor-select\"\n          >\n            <option value=\"\">Без папки</option>\n            {folders.map(folder => (\n              <option key={folder.id} value={folder.id}>{folder.name}</option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"editor-section\">\n          <label>Теги:</label>\n          <div className=\"tags-selector\">\n            {tags.map(tag => (\n              <button\n                key={tag.id}\n                className={`tag-selector-btn ${selectedTags.includes(tag.id) ? 'active' : ''}`}\n                onClick={() => toggleTag(tag.id)}\n                style={{\n                  backgroundColor: selectedTags.includes(tag.id) ? tag.color : 'transparent',\n                  borderColor: tag.color,\n                  color: selectedTags.includes(tag.id) ? '#fff' : tag.color,\n                }}\n              >\n                {tag.name}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <ExportModal\n        note={note}\n        isOpen={showExportModal}\n        onClose={() => setShowExportModal(false)}\n      />\n    </div>\n  );\n};\n\nexport default NoteEditor;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}