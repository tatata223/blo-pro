{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const ThemeContext=/*#__PURE__*/createContext();export const useTheme=()=>{const context=useContext(ThemeContext);if(!context){throw new Error('useTheme must be used within ThemeProvider');}return context;};export const ThemeProvider=_ref=>{let{children}=_ref;const[theme,setTheme]=useState(()=>{// Проверяем сохраненную тему или системную\nconst savedTheme=localStorage.getItem('theme');if(savedTheme){return savedTheme;}// Проверяем системную тему\nif(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches){return'dark';}return'light';});useEffect(()=>{// Плавное переключение темы с анимацией\nconst root=document.documentElement;const body=document.body;// Добавляем класс для анимации\nbody.classList.add('theme-transitioning');// Плавное переключение всех свойств\nroot.style.transition='background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1), color 0.6s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.6s cubic-bezier(0.4, 0, 0.2, 1)';// Устанавливаем тему\nroot.setAttribute('data-theme',theme);localStorage.setItem('theme',theme);// Убираем transition и класс после переключения\nsetTimeout(()=>{root.style.transition='';body.classList.remove('theme-transitioning');},600);},[theme]);useEffect(()=>{// Слушаем изменения системной темы\nconst mediaQuery=window.matchMedia('(prefers-color-scheme: dark)');const handleChange=e=>{if(!localStorage.getItem('theme')){setTheme(e.matches?'dark':'light');}};mediaQuery.addEventListener('change',handleChange);return()=>mediaQuery.removeEventListener('change',handleChange);},[]);const toggleTheme=()=>{setTheme(prev=>prev==='light'?'dark':'light');};const value={theme,toggleTheme,isDark:theme==='dark'};return/*#__PURE__*/_jsx(ThemeContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","ThemeContext","useTheme","context","Error","ThemeProvider","_ref","children","theme","setTheme","savedTheme","localStorage","getItem","window","matchMedia","matches","root","document","documentElement","body","classList","add","style","transition","setAttribute","setItem","setTimeout","remove","mediaQuery","handleChange","e","addEventListener","removeEventListener","toggleTheme","prev","value","isDark","Provider"],"sources":["/Users/mikhail/Downloads/ЗаметкиPARADIZE/frontend/src/contexts/ThemeContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst ThemeContext = createContext();\n\nexport const useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within ThemeProvider');\n  }\n  return context;\n};\n\nexport const ThemeProvider = ({ children }) => {\n  const [theme, setTheme] = useState(() => {\n    // Проверяем сохраненную тему или системную\n    const savedTheme = localStorage.getItem('theme');\n    if (savedTheme) {\n      return savedTheme;\n    }\n    // Проверяем системную тему\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      return 'dark';\n    }\n    return 'light';\n  });\n\n  useEffect(() => {\n    // Плавное переключение темы с анимацией\n    const root = document.documentElement;\n    const body = document.body;\n    \n    // Добавляем класс для анимации\n    body.classList.add('theme-transitioning');\n    \n    // Плавное переключение всех свойств\n    root.style.transition = 'background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1), color 0.6s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.6s cubic-bezier(0.4, 0, 0.2, 1)';\n    \n    // Устанавливаем тему\n    root.setAttribute('data-theme', theme);\n    localStorage.setItem('theme', theme);\n    \n    // Убираем transition и класс после переключения\n    setTimeout(() => {\n      root.style.transition = '';\n      body.classList.remove('theme-transitioning');\n    }, 600);\n  }, [theme]);\n\n  useEffect(() => {\n    // Слушаем изменения системной темы\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    const handleChange = (e) => {\n      if (!localStorage.getItem('theme')) {\n        setTheme(e.matches ? 'dark' : 'light');\n      }\n    };\n    mediaQuery.addEventListener('change', handleChange);\n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, []);\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  const value = {\n    theme,\n    toggleTheme,\n    isDark: theme === 'dark',\n  };\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\n};\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,YAAY,cAAGN,aAAa,CAAC,CAAC,CAEpC,MAAO,MAAM,CAAAO,QAAQ,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,OAAO,CAAGP,UAAU,CAACK,YAAY,CAAC,CACxC,GAAI,CAACE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,4CAA4C,CAAC,CAC/D,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,MAAO,MAAM,CAAAE,aAAa,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACxC,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,IAAM,CACvC;AACA,KAAM,CAAAa,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAChD,GAAIF,UAAU,CAAE,CACd,MAAO,CAAAA,UAAU,CACnB,CACA;AACA,GAAIG,MAAM,CAACC,UAAU,EAAID,MAAM,CAACC,UAAU,CAAC,8BAA8B,CAAC,CAACC,OAAO,CAAE,CAClF,MAAO,MAAM,CACf,CACA,MAAO,OAAO,CAChB,CAAC,CAAC,CAEFjB,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAkB,IAAI,CAAGC,QAAQ,CAACC,eAAe,CACrC,KAAM,CAAAC,IAAI,CAAGF,QAAQ,CAACE,IAAI,CAE1B;AACAA,IAAI,CAACC,SAAS,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAEzC;AACAL,IAAI,CAACM,KAAK,CAACC,UAAU,CAAG,6IAA6I,CAErK;AACAP,IAAI,CAACQ,YAAY,CAAC,YAAY,CAAEhB,KAAK,CAAC,CACtCG,YAAY,CAACc,OAAO,CAAC,OAAO,CAAEjB,KAAK,CAAC,CAEpC;AACAkB,UAAU,CAAC,IAAM,CACfV,IAAI,CAACM,KAAK,CAACC,UAAU,CAAG,EAAE,CAC1BJ,IAAI,CAACC,SAAS,CAACO,MAAM,CAAC,qBAAqB,CAAC,CAC9C,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,CAAE,CAACnB,KAAK,CAAC,CAAC,CAEXV,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAA8B,UAAU,CAAGf,MAAM,CAACC,UAAU,CAAC,8BAA8B,CAAC,CACpE,KAAM,CAAAe,YAAY,CAAIC,CAAC,EAAK,CAC1B,GAAI,CAACnB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE,CAClCH,QAAQ,CAACqB,CAAC,CAACf,OAAO,CAAG,MAAM,CAAG,OAAO,CAAC,CACxC,CACF,CAAC,CACDa,UAAU,CAACG,gBAAgB,CAAC,QAAQ,CAAEF,YAAY,CAAC,CACnD,MAAO,IAAMD,UAAU,CAACI,mBAAmB,CAAC,QAAQ,CAAEH,YAAY,CAAC,CACrE,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,WAAW,CAAGA,CAAA,GAAM,CACxBxB,QAAQ,CAACyB,IAAI,EAAIA,IAAI,GAAK,OAAO,CAAG,MAAM,CAAG,OAAO,CAAC,CACvD,CAAC,CAED,KAAM,CAAAC,KAAK,CAAG,CACZ3B,KAAK,CACLyB,WAAW,CACXG,MAAM,CAAE5B,KAAK,GAAK,MACpB,CAAC,CAED,mBAAOR,IAAA,CAACC,YAAY,CAACoC,QAAQ,EAACF,KAAK,CAAEA,KAAM,CAAA5B,QAAA,CAAEA,QAAQ,CAAwB,CAAC,CAChF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}