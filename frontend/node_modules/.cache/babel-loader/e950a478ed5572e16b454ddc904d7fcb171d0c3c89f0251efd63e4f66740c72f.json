{"ast":null,"code":"import React,{useState,useEffect}from'react';import{marketplaceAPI}from'../../api/api';import MarketplaceItem from'./MarketplaceItem';import UploadItem from'./UploadItem';import Layout from'../Layout/Layout';import'./Marketplace.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Marketplace=()=>{const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('all');const[showUpload,setShowUpload]=useState(false);const[searchQuery,setSearchQuery]=useState('');useEffect(()=>{loadItems();},[filter]);const loadItems=async()=>{try{const params=filter!=='all'?{type:filter}:{};const response=await marketplaceAPI.getItems(params);setItems(response.data);}catch(error){console.error('Error loading marketplace items:',error);}finally{setLoading(false);}};const filteredItems=items.filter(item=>item.name.toLowerCase().includes(searchQuery.toLowerCase())||item.description.toLowerCase().includes(searchQuery.toLowerCase()));return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"marketplace\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"marketplace-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041C\\u0430\\u0440\\u043A\\u0435\\u0442\\u043F\\u043B\\u0435\\u0439\\u0441\"}),/*#__PURE__*/_jsx(\"button\",{className:\"marketplace-upload-btn\",onClick:()=>setShowUpload(!showUpload),children:showUpload?'Отмена':'Загрузить товар'})]}),showUpload&&/*#__PURE__*/_jsx(UploadItem,{onUploadComplete:()=>{setShowUpload(false);loadItems();},onCancel:()=>setShowUpload(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"marketplace-filters\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"marketplace-search\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"marketplace-search-input\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"marketplace-filter-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"filter-tab \".concat(filter==='all'?'active':''),onClick:()=>setFilter('all'),children:\"\\u0412\\u0441\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-tab \".concat(filter==='template'?'active':''),onClick:()=>setFilter('template'),children:\"\\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-tab \".concat(filter==='font'?'active':''),onClick:()=>setFilter('font'),children:\"\\u0428\\u0440\\u0438\\u0444\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-tab \".concat(filter==='animation'?'active':''),onClick:()=>setFilter('animation'),children:\"\\u0410\\u043D\\u0438\\u043C\\u0430\\u0446\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-tab \".concat(filter==='theme'?'active':''),onClick:()=>setFilter('theme'),children:\"\\u0422\\u0435\\u043C\\u044B\"})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"marketplace-loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432...\"}):filteredItems.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"marketplace-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"marketplace-grid\",children:filteredItems.map(item=>/*#__PURE__*/_jsx(MarketplaceItem,{item:item,onPurchase:loadItems},item.id))})]})});};export default Marketplace;","map":{"version":3,"names":["React","useState","useEffect","marketplaceAPI","MarketplaceItem","UploadItem","Layout","jsx","_jsx","jsxs","_jsxs","Marketplace","items","setItems","loading","setLoading","filter","setFilter","showUpload","setShowUpload","searchQuery","setSearchQuery","loadItems","params","type","response","getItems","data","error","console","filteredItems","item","name","toLowerCase","includes","description","children","className","onClick","onUploadComplete","onCancel","placeholder","value","onChange","e","target","concat","length","map","onPurchase","id"],"sources":["/Users/mikhail/Downloads/ЗаметкиPARADIZE/frontend/src/components/Marketplace/Marketplace.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { marketplaceAPI } from '../../api/api';\nimport MarketplaceItem from './MarketplaceItem';\nimport UploadItem from './UploadItem';\nimport Layout from '../Layout/Layout';\nimport './Marketplace.css';\n\nconst Marketplace = () => {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [showUpload, setShowUpload] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  useEffect(() => {\n    loadItems();\n  }, [filter]);\n\n  const loadItems = async () => {\n    try {\n      const params = filter !== 'all' ? { type: filter } : {};\n      const response = await marketplaceAPI.getItems(params);\n      setItems(response.data);\n    } catch (error) {\n      console.error('Error loading marketplace items:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredItems = items.filter(item =>\n    item.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    item.description.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <Layout>\n      <div className=\"marketplace\">\n      <div className=\"marketplace-header\">\n        <h1>Маркетплейс</h1>\n        <button\n          className=\"marketplace-upload-btn\"\n          onClick={() => setShowUpload(!showUpload)}\n        >\n          {showUpload ? 'Отмена' : 'Загрузить товар'}\n        </button>\n      </div>\n\n      {showUpload && (\n        <UploadItem\n          onUploadComplete={() => {\n            setShowUpload(false);\n            loadItems();\n          }}\n          onCancel={() => setShowUpload(false)}\n        />\n      )}\n\n      <div className=\"marketplace-filters\">\n        <div className=\"marketplace-search\">\n          <input\n            type=\"text\"\n            placeholder=\"Поиск товаров...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"marketplace-search-input\"\n          />\n        </div>\n        <div className=\"marketplace-filter-tabs\">\n          <button\n            className={`filter-tab ${filter === 'all' ? 'active' : ''}`}\n            onClick={() => setFilter('all')}\n          >\n            Все\n          </button>\n          <button\n            className={`filter-tab ${filter === 'template' ? 'active' : ''}`}\n            onClick={() => setFilter('template')}\n          >\n            Шаблоны\n          </button>\n          <button\n            className={`filter-tab ${filter === 'font' ? 'active' : ''}`}\n            onClick={() => setFilter('font')}\n          >\n            Шрифты\n          </button>\n          <button\n            className={`filter-tab ${filter === 'animation' ? 'active' : ''}`}\n            onClick={() => setFilter('animation')}\n          >\n            Анимации\n          </button>\n          <button\n            className={`filter-tab ${filter === 'theme' ? 'active' : ''}`}\n            onClick={() => setFilter('theme')}\n          >\n            Темы\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"marketplace-loading\">Загрузка товаров...</div>\n      ) : filteredItems.length === 0 ? (\n        <div className=\"marketplace-empty\">\n          <p>Товары не найдены</p>\n        </div>\n      ) : (\n        <div className=\"marketplace-grid\">\n          {filteredItems.map(item => (\n            <MarketplaceItem\n              key={item.id}\n              item={item}\n              onPurchase={loadItems}\n            />\n          ))}\n        </div>\n      )}\n      </div>\n    </Layout>\n  );\n};\n\nexport default Marketplace;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}