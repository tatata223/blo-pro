{"ast":null,"code":"import React,{useState}from'react';import'./ChatList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatList=_ref=>{let{rooms,selectedRoom,onSelectRoom,onCreateRoom,currentUser}=_ref;const[showNewChat,setShowNewChat]=useState(false);const handleRoomClick=room=>{onSelectRoom(room);};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-list-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0427\\u0430\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-new-btn\",onClick:()=>setShowNewChat(!showNewChat),title:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0447\\u0430\\u0442\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-list-items\",children:rooms.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"chat-list-empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0445 \\u0447\\u0430\\u0442\\u043E\\u0432\"}),/*#__PURE__*/_jsx(\"p\",{className:\"chat-list-empty-hint\",children:\"\\u041D\\u0430\\u0447\\u043D\\u0438\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0447\\u0430\\u0442, \\u043D\\u0430\\u0436\\u0430\\u0432 \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\u0432\\u044B\\u0448\\u0435\"})]}):rooms.map(room=>{var _room$display_name,_room$display_name$;return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-list-item \".concat((selectedRoom===null||selectedRoom===void 0?void 0:selectedRoom.id)===room.id?'active':''),onClick:()=>handleRoomClick(room),children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-list-item-avatar\",children:((_room$display_name=room.display_name)===null||_room$display_name===void 0?void 0:(_room$display_name$=_room$display_name[0])===null||_room$display_name$===void 0?void 0:_room$display_name$.toUpperCase())||'C'}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-list-item-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-list-item-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"chat-list-item-name\",children:room.display_name}),room.last_message&&/*#__PURE__*/_jsx(\"span\",{className:\"chat-list-item-time\",children:new Date(room.last_message.created_at).toLocaleTimeString('ru-RU',{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-list-item-footer\",children:[room.last_message&&/*#__PURE__*/_jsxs(\"span\",{className:\"chat-list-item-preview\",children:[room.last_message.sender===(currentUser===null||currentUser===void 0?void 0:currentUser.username)?'Вы: ':'',room.last_message.content]}),room.unread_count>0&&/*#__PURE__*/_jsx(\"span\",{className:\"chat-list-item-badge\",children:room.unread_count})]})]})]},room.id);})})]});};export default ChatList;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ChatList","_ref","rooms","selectedRoom","onSelectRoom","onCreateRoom","currentUser","showNewChat","setShowNewChat","handleRoomClick","room","className","children","onClick","title","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","length","map","_room$display_name","_room$display_name$","concat","id","display_name","toUpperCase","last_message","Date","created_at","toLocaleTimeString","hour","minute","sender","username","content","unread_count"],"sources":["/Users/mikhail/Downloads/ЗаметкиPARADIZE/frontend/src/components/Chat/ChatList.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './ChatList.css';\n\nconst ChatList = ({ rooms, selectedRoom, onSelectRoom, onCreateRoom, currentUser }) => {\n  const [showNewChat, setShowNewChat] = useState(false);\n\n  const handleRoomClick = (room) => {\n    onSelectRoom(room);\n  };\n\n  return (\n    <div className=\"chat-list\">\n      <div className=\"chat-list-header\">\n        <h2>Чаты</h2>\n        <button\n          className=\"chat-new-btn\"\n          onClick={() => setShowNewChat(!showNewChat)}\n          title=\"Новый чат\"\n        >\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M12 5V19M5 12H19\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"chat-list-items\">\n        {rooms.length === 0 ? (\n          <div className=\"chat-list-empty\">\n            <p>Нет активных чатов</p>\n            <p className=\"chat-list-empty-hint\">Начните новый чат, нажав кнопку выше</p>\n          </div>\n        ) : (\n          rooms.map(room => (\n            <div\n              key={room.id}\n              className={`chat-list-item ${selectedRoom?.id === room.id ? 'active' : ''}`}\n              onClick={() => handleRoomClick(room)}\n            >\n              <div className=\"chat-list-item-avatar\">\n                {room.display_name?.[0]?.toUpperCase() || 'C'}\n              </div>\n              <div className=\"chat-list-item-content\">\n                <div className=\"chat-list-item-header\">\n                  <span className=\"chat-list-item-name\">{room.display_name}</span>\n                  {room.last_message && (\n                    <span className=\"chat-list-item-time\">\n                      {new Date(room.last_message.created_at).toLocaleTimeString('ru-RU', {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </span>\n                  )}\n                </div>\n                <div className=\"chat-list-item-footer\">\n                  {room.last_message && (\n                    <span className=\"chat-list-item-preview\">\n                      {room.last_message.sender === currentUser?.username ? 'Вы: ' : ''}\n                      {room.last_message.content}\n                    </span>\n                  )}\n                  {room.unread_count > 0 && (\n                    <span className=\"chat-list-item-badge\">{room.unread_count}</span>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}