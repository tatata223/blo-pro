{"ast":null,"code":"import React,{useState,memo,useEffect}from'react';import toast from'react-hot-toast';import{foldersAPI,tagsAPI}from'../../api/api';import FolderForm from'./FolderForm';import TagForm from'./TagForm';import SidebarTabs from'./SidebarTabs';import'./Sidebar.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Sidebar=/*#__PURE__*/memo(_ref=>{let{folders,tags,selectedFolder,selectedTags,onFolderSelect,onTagSelect,onFolderCreate,onTagCreate,onTemplateSelect,loading=false,user=null,onAuthRequired=null,isOpen=false,onClose=null}=_ref;const[activeTab,setActiveTab]=useState('folders');const[showFolderForm,setShowFolderForm]=useState(false);const[showTagForm,setShowTagForm]=useState(false);const handleFolderCreate=async folderData=>{// Если пользователь не авторизован, используем callback для гостевого режима\nif(!user){if(onFolderCreate){await onFolderCreate(folderData);setShowFolderForm(false);}else if(onAuthRequired){onAuthRequired();}return;}try{console.log('Creating folder with data:',folderData);const response=await foldersAPI.create(folderData);console.log('Folder creation response:',response);// Проверяем успешный ответ\nif(response&&(response.status===201||response.status===200||response.data)){setShowFolderForm(false);toast.success('Папка успешно создана!');// Принудительно обновляем список папок\nif(onFolderCreate){console.log('Calling onFolderCreate to refresh folders');await onFolderCreate();}else{console.warn('onFolderCreate callback is not provided');}}else{throw new Error('Неожиданный ответ от сервера');}}catch(error){var _error$response;console.error('Error creating folder:',error);console.error('Error response:',error.response);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){if(onAuthRequired){onAuthRequired();}setShowFolderForm(false);}else{var _error$response2,_error$response2$data,_error$response3,_error$response3$data,_error$response4,_error$response4$data;const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||error.message||'Ошибка при создании папки. Попробуйте еще раз.';toast.error(errorMessage);}}};const handleTagCreate=async tagData=>{// Проверяем авторизацию\nif(!user){if(onAuthRequired){onAuthRequired();}else{toast.error('Войдите, чтобы создать тег');}setShowTagForm(false);return;}try{console.log('Creating tag with data:',tagData);const response=await tagsAPI.create(tagData);console.log('Tag creation response:',response);// Проверяем успешный ответ\nif(response&&(response.status===201||response.status===200||response.data)){setShowTagForm(false);toast.success('Тег успешно создан!');// Принудительно обновляем список тегов\nif(onTagCreate){console.log('Calling onTagCreate to refresh tags');await onTagCreate();}else{console.warn('onTagCreate callback is not provided');}}else{throw new Error('Неожиданный ответ от сервера');}}catch(error){var _error$response5;console.error('Error creating tag:',error);console.error('Error response:',error.response);if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)===401){if(onAuthRequired){onAuthRequired();}setShowTagForm(false);}else{var _error$response6,_error$response6$data,_error$response7,_error$response7$data,_error$response8,_error$response8$data;const errorMessage=((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.detail)||((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.message)||error.message||'Ошибка при создании тега. Попробуйте еще раз.';toast.error(errorMessage);}}};const toggleTag=tagId=>{if(selectedTags.includes(tagId)){onTagSelect(selectedTags.filter(id=>id!==tagId));}else{onTagSelect([...selectedTags,tagId]);}};const handleContextMenu=(e,type,item)=>{e.preventDefault();// TODO: Показать контекстное меню\nconsole.log('Context menu:',type,item);};const handleFolderDelete=async(folderId,e)=>{e.stopPropagation();try{await foldersAPI.delete(folderId);toast.success('Папка удалена');if(onFolderCreate){await onFolderCreate();}// Если удаленная папка была выбрана, сбрасываем выбор\nif(selectedFolder===folderId){onFolderSelect(null);}}catch(error){var _error$response9,_error$response9$data;console.error('Error deleting folder:',error);toast.error(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||'Ошибка при удалении папки');}};const handleTagDelete=async(tagId,e)=>{e.stopPropagation();try{await tagsAPI.delete(tagId);toast.success('Тег удален');if(onTagCreate){await onTagCreate();}// Убираем тег из выбранных, если он был выбран\nif(selectedTags.includes(tagId)){onTagSelect(selectedTags.filter(id=>id!==tagId));}}catch(error){var _error$response0,_error$response0$data;console.error('Error deleting tag:',error);toast.error(((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.error)||'Ошибка при удалении тега');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-overlay\",onClick:onClose}),/*#__PURE__*/_jsx(\"aside\",{className:\"sidebar \".concat(isOpen?'open':''),children:/*#__PURE__*/_jsx(SidebarTabs,{activeTab:activeTab,onTabChange:setActiveTab,children:activeTab==='folders'?/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",style:{display:'inline-block',verticalAlign:'middle',marginRight:'8px'},children:[/*#__PURE__*/_jsx(\"path\",{d:\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 3V21\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})]}),\"\\u041F\\u0430\\u043F\\u043A\\u0438\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:()=>{if(!user&&onAuthRequired){onAuthRequired();}else{setShowFolderForm(!showFolderForm);}},title:user?\"Создать папку\":\"Войдите, чтобы создать папку\",disabled:!user,children:/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]}),showFolderForm&&/*#__PURE__*/_jsx(FolderForm,{onSubmit:handleFolderCreate,onCancel:()=>setShowFolderForm(false)}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:!user?'Создайте новую папку или создайте новый тег':'Загрузка...'}):/*#__PURE__*/_jsxs(\"div\",{className:\"folder-list\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"folder-item \".concat(selectedFolder===null?'active':''),onClick:()=>onFolderSelect(null),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",style:{marginRight:'8px'},children:[/*#__PURE__*/_jsx(\"path\",{d:\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 3V21\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})]}),\"\\u0412\\u0441\\u0435 \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0438\"]}),Array.isArray(folders)&&folders.length>0?folders.map(folder=>/*#__PURE__*/_jsxs(\"div\",{className:\"folder-item-wrapper \".concat(selectedFolder===folder.id?'active':''),style:{borderLeftColor:folder.color||'#90EE90'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"folder-item \".concat(selectedFolder===folder.id?'active':''),onClick:()=>onFolderSelect(folder.id),onContextMenu:e=>handleContextMenu(e,'folder',folder),children:[folder.is_favorite&&/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"currentColor\",style:{marginRight:'4px'},children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\",fill:\"currentColor\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"folder-name\",children:folder.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"folder-count\",children:[\"(\",folder.notes_count||0,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"folder-delete-btn\",onClick:e=>handleFolderDelete(folder.id,e),title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043F\\u0430\\u043F\\u043A\\u0443\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18 6L6 18M6 6L18 18\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]},folder.id)):/*#__PURE__*/_jsx(\"div\",{className:\"empty-message\",children:\"\\u041D\\u0435\\u0442 \\u043F\\u0430\\u043F\\u043E\\u043A. \\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u0443\\u044E!\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",style:{display:'inline-block',verticalAlign:'middle',marginRight:'8px'},children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.59 13.41L13.42 20.58C13.2343 20.766 13.0137 20.9135 12.7709 21.0141C12.5281 21.1148 12.2678 21.1666 12.005 21.1666C11.7422 21.1666 11.4819 21.1148 11.2391 21.0141C10.9963 20.9135 10.7757 20.766 10.59 20.58L2.93 12.93C2.54371 12.5437 2.26852 12.0572 2.13389 11.527C1.99926 10.9968 2.01024 10.4447 2.16569 9.92196C2.32113 9.39924 2.61489 8.92677 3.01482 8.55685C3.41475 8.18692 3.90508 7.93361 4.42818 7.82578C4.95129 7.71796 5.48817 7.7593 5.99007 7.94505C6.49197 8.1308 6.93807 8.45473 7.28 8.88L8.34 10.34L15.66 3.02C16.0463 2.63371 16.5328 2.35852 17.063 2.22389C17.5932 2.08926 18.1453 2.10024 18.668 2.25569C19.1908 2.41113 19.6632 2.70489 20.0332 3.10482C20.4031 3.50475 20.6564 3.99508 20.7642 4.51818C20.872 5.04129 20.8307 5.57817 20.6449 6.08007C20.4592 6.58197 20.1353 7.02807 19.71 7.37L18.15 8.93L20.59 11.37C20.976 11.7567 21.2505 12.2428 21.3844 12.7727C21.5183 13.3026 21.5065 13.8544 21.3502 14.377C21.1939 14.8996 20.8993 15.3718 20.4986 15.7414C20.0979 16.111 19.6069 16.364 19.0833 16.4718C18.5597 16.5796 18.0225 16.5381 17.5204 16.3522C17.0183 16.1663 16.5721 15.8422 16.23 15.42L13.79 12.98L12.23 14.54L13.41 15.72C13.596 15.906 13.7435 16.1266 13.8441 16.3694C13.9448 16.6122 13.9966 16.8725 13.9966 17.1353C13.9966 17.3981 13.9448 17.6584 13.8441 17.9012C13.7435 18.144 13.596 18.3646 13.41 18.5506C13.224 18.7366 13.0034 18.8841 12.7606 18.9848C12.5178 19.0854 12.2575 19.1372 11.9947 19.1372C11.7319 19.1372 11.4716 19.0854 11.2288 18.9848C10.986 18.8841 10.7654 18.7366 10.5794 18.5506L2.93 10.93\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})}),\"\\u0422\\u0435\\u0433\\u0438\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:()=>{if(!user&&onAuthRequired){onAuthRequired();}else{setShowTagForm(!showTagForm);}},title:user?\"Создать тег\":\"Войдите, чтобы создать тег\",disabled:!user,children:/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]}),showTagForm&&/*#__PURE__*/_jsx(TagForm,{onSubmit:handleTagCreate,onCancel:()=>setShowTagForm(false)}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:!user?'Создайте новую папку или создайте новый тег':'Загрузка...'}):/*#__PURE__*/_jsx(\"div\",{className:\"tag-list\",children:Array.isArray(tags)&&tags.length>0?tags.sort((a,b)=>(b.usage_count||0)-(a.usage_count||0)).map(tag=>/*#__PURE__*/_jsxs(\"div\",{className:\"tag-item-wrapper\",style:{backgroundColor:selectedTags.includes(tag.id)?tag.color||'#FFD700':'transparent',borderColor:tag.color||'#FFD700'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"tag-item \".concat(selectedTags.includes(tag.id)?'active':''),onClick:()=>toggleTag(tag.id),onContextMenu:e=>handleContextMenu(e,'tag',tag),style:{backgroundColor:'transparent',border:'none',color:selectedTags.includes(tag.id)?'#fff':tag.color||'#FFD700'},children:[tag.name,(tag.usage_count||tag.notes_count||0)>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"tag-count\",children:[\"(\",tag.usage_count||tag.notes_count||0,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"tag-delete-btn\",onClick:e=>handleTagDelete(tag.id,e),title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0442\\u0435\\u0433\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18 6L6 18M6 6L18 18\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]},tag.id)):/*#__PURE__*/_jsx(\"div\",{className:\"empty-message\",children:\"\\u041D\\u0435\\u0442 \\u0442\\u0435\\u0433\\u043E\\u0432. \\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u044B\\u0439!\"})})]})})})]});});Sidebar.displayName='Sidebar';export default Sidebar;","map":{"version":3,"names":["React","useState","memo","useEffect","toast","foldersAPI","tagsAPI","FolderForm","TagForm","SidebarTabs","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Sidebar","_ref","folders","tags","selectedFolder","selectedTags","onFolderSelect","onTagSelect","onFolderCreate","onTagCreate","onTemplateSelect","loading","user","onAuthRequired","isOpen","onClose","activeTab","setActiveTab","showFolderForm","setShowFolderForm","showTagForm","setShowTagForm","handleFolderCreate","folderData","console","log","response","create","status","data","success","warn","Error","error","_error$response","_error$response2","_error$response2$data","_error$response3","_error$response3$data","_error$response4","_error$response4$data","errorMessage","detail","message","handleTagCreate","tagData","_error$response5","_error$response6","_error$response6$data","_error$response7","_error$response7$data","_error$response8","_error$response8$data","toggleTag","tagId","includes","filter","id","handleContextMenu","e","type","item","preventDefault","handleFolderDelete","folderId","stopPropagation","delete","_error$response9","_error$response9$data","handleTagDelete","_error$response0","_error$response0$data","children","className","onClick","concat","onTabChange","width","height","viewBox","fill","style","display","verticalAlign","marginRight","d","stroke","strokeWidth","strokeLinecap","title","disabled","xmlns","onSubmit","onCancel","Array","isArray","length","map","folder","borderLeftColor","color","onContextMenu","is_favorite","name","notes_count","strokeLinejoin","sort","a","b","usage_count","tag","backgroundColor","borderColor","border","displayName"],"sources":["/Users/mikhail/Downloads/blo-pro/frontend/src/components/Sidebar/Sidebar.js"],"sourcesContent":["import React, { useState, memo, useEffect } from 'react';\nimport toast from 'react-hot-toast';\nimport { foldersAPI, tagsAPI } from '../../api/api';\nimport FolderForm from './FolderForm';\nimport TagForm from './TagForm';\nimport SidebarTabs from './SidebarTabs';\nimport './Sidebar.css';\n\nconst Sidebar = memo(({\n  folders,\n  tags,\n  selectedFolder,\n  selectedTags,\n  onFolderSelect,\n  onTagSelect,\n  onFolderCreate,\n  onTagCreate,\n  onTemplateSelect,\n  loading = false,\n  user = null,\n  onAuthRequired = null,\n  isOpen = false,\n  onClose = null,\n}) => {\n  const [activeTab, setActiveTab] = useState('folders');\n  const [showFolderForm, setShowFolderForm] = useState(false);\n  const [showTagForm, setShowTagForm] = useState(false);\n\n  const handleFolderCreate = async (folderData) => {\n    // Если пользователь не авторизован, используем callback для гостевого режима\n    if (!user) {\n      if (onFolderCreate) {\n        await onFolderCreate(folderData);\n        setShowFolderForm(false);\n      } else if (onAuthRequired) {\n        onAuthRequired();\n      }\n      return;\n    }\n\n    try {\n      console.log('Creating folder with data:', folderData);\n      const response = await foldersAPI.create(folderData);\n      console.log('Folder creation response:', response);\n      \n      // Проверяем успешный ответ\n      if (response && (response.status === 201 || response.status === 200 || response.data)) {\n        setShowFolderForm(false);\n        toast.success('Папка успешно создана!');\n        \n        // Принудительно обновляем список папок\n        if (onFolderCreate) {\n          console.log('Calling onFolderCreate to refresh folders');\n          await onFolderCreate();\n        } else {\n          console.warn('onFolderCreate callback is not provided');\n        }\n      } else {\n        throw new Error('Неожиданный ответ от сервера');\n      }\n    } catch (error) {\n      console.error('Error creating folder:', error);\n      console.error('Error response:', error.response);\n      if (error.response?.status === 401) {\n        if (onAuthRequired) {\n          onAuthRequired();\n        }\n        setShowFolderForm(false);\n      } else {\n        const errorMessage = error.response?.data?.error || \n                            error.response?.data?.detail || \n                            error.response?.data?.message ||\n                            error.message || \n                            'Ошибка при создании папки. Попробуйте еще раз.';\n        toast.error(errorMessage);\n      }\n    }\n  };\n\n  const handleTagCreate = async (tagData) => {\n    // Проверяем авторизацию\n    if (!user) {\n      if (onAuthRequired) {\n        onAuthRequired();\n      } else {\n        toast.error('Войдите, чтобы создать тег');\n      }\n      setShowTagForm(false);\n      return;\n    }\n\n    try {\n      console.log('Creating tag with data:', tagData);\n      const response = await tagsAPI.create(tagData);\n      console.log('Tag creation response:', response);\n      \n      // Проверяем успешный ответ\n      if (response && (response.status === 201 || response.status === 200 || response.data)) {\n        setShowTagForm(false);\n        toast.success('Тег успешно создан!');\n        \n        // Принудительно обновляем список тегов\n        if (onTagCreate) {\n          console.log('Calling onTagCreate to refresh tags');\n          await onTagCreate();\n        } else {\n          console.warn('onTagCreate callback is not provided');\n        }\n      } else {\n        throw new Error('Неожиданный ответ от сервера');\n      }\n    } catch (error) {\n      console.error('Error creating tag:', error);\n      console.error('Error response:', error.response);\n      if (error.response?.status === 401) {\n        if (onAuthRequired) {\n          onAuthRequired();\n        }\n        setShowTagForm(false);\n      } else {\n        const errorMessage = error.response?.data?.error || \n                            error.response?.data?.detail || \n                            error.response?.data?.message ||\n                            error.message || \n                            'Ошибка при создании тега. Попробуйте еще раз.';\n        toast.error(errorMessage);\n      }\n    }\n  };\n\n  const toggleTag = (tagId) => {\n    if (selectedTags.includes(tagId)) {\n      onTagSelect(selectedTags.filter(id => id !== tagId));\n    } else {\n      onTagSelect([...selectedTags, tagId]);\n    }\n  };\n\n  const handleContextMenu = (e, type, item) => {\n    e.preventDefault();\n    // TODO: Показать контекстное меню\n    console.log('Context menu:', type, item);\n  };\n\n  const handleFolderDelete = async (folderId, e) => {\n    e.stopPropagation();\n    try {\n      await foldersAPI.delete(folderId);\n      toast.success('Папка удалена');\n      if (onFolderCreate) {\n        await onFolderCreate();\n      }\n      // Если удаленная папка была выбрана, сбрасываем выбор\n      if (selectedFolder === folderId) {\n        onFolderSelect(null);\n      }\n    } catch (error) {\n      console.error('Error deleting folder:', error);\n      toast.error(error.response?.data?.error || 'Ошибка при удалении папки');\n    }\n  };\n\n  const handleTagDelete = async (tagId, e) => {\n    e.stopPropagation();\n    try {\n      await tagsAPI.delete(tagId);\n      toast.success('Тег удален');\n      if (onTagCreate) {\n        await onTagCreate();\n      }\n      // Убираем тег из выбранных, если он был выбран\n      if (selectedTags.includes(tagId)) {\n        onTagSelect(selectedTags.filter(id => id !== tagId));\n      }\n    } catch (error) {\n      console.error('Error deleting tag:', error);\n      toast.error(error.response?.data?.error || 'Ошибка при удалении тега');\n    }\n  };\n\n\n  return (\n    <>\n      {isOpen && <div className=\"sidebar-overlay\" onClick={onClose} />}\n      <aside className={`sidebar ${isOpen ? 'open' : ''}`}>\n\n\n      <SidebarTabs activeTab={activeTab} onTabChange={setActiveTab}>\n        {activeTab === 'folders' ? (\n          <div className=\"sidebar-section\">\n            <div className=\"sidebar-header\">\n              <h3>\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ display: 'inline-block', verticalAlign: 'middle', marginRight: '8px' }}>\n                  <path d=\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                  <path d=\"M7 3V21\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                </svg>\n                Папки\n              </h3>\n              <button\n                className=\"btn-add\"\n                onClick={() => {\n                  if (!user && onAuthRequired) {\n                    onAuthRequired();\n                  } else {\n                    setShowFolderForm(!showFolderForm);\n                  }\n                }}\n                title={user ? \"Создать папку\" : \"Войдите, чтобы создать папку\"}\n                disabled={!user}\n              >\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M12 5V19M5 12H19\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                </svg>\n              </button>\n            </div>\n            {showFolderForm && (\n              <FolderForm\n                onSubmit={handleFolderCreate}\n                onCancel={() => setShowFolderForm(false)}\n              />\n            )}\n            {loading ? (\n              <div className=\"loading-message\">\n                {!user ? 'Создайте новую папку или создайте новый тег' : 'Загрузка...'}\n              </div>\n            ) : (\n              <div className=\"folder-list\">\n                <button\n                  className={`folder-item ${selectedFolder === null ? 'active' : ''}`}\n                  onClick={() => onFolderSelect(null)}\n                >\n                  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ marginRight: '8px' }}>\n                    <path d=\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                    <path d=\"M7 3V21\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                  </svg>\n                  Все заметки\n                </button>\n                {Array.isArray(folders) && folders.length > 0 ? (\n                  folders.map(folder => (\n                    <div\n                      key={folder.id}\n                      className={`folder-item-wrapper ${selectedFolder === folder.id ? 'active' : ''}`}\n                      style={{ borderLeftColor: folder.color || '#90EE90' }}\n                    >\n                      <button\n                        className={`folder-item ${selectedFolder === folder.id ? 'active' : ''}`}\n                        onClick={() => onFolderSelect(folder.id)}\n                        onContextMenu={(e) => handleContextMenu(e, 'folder', folder)}\n                      >\n                        {folder.is_favorite && (\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style={{ marginRight: '4px' }}>\n                            <path d=\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\" fill=\"currentColor\"/>\n                          </svg>\n                        )}\n                        <span className=\"folder-name\">{folder.name}</span>\n                        <span className=\"folder-count\">({folder.notes_count || 0})</span>\n                      </button>\n                      <button\n                        className=\"folder-delete-btn\"\n                        onClick={(e) => handleFolderDelete(folder.id, e)}\n                        title=\"Удалить папку\"\n                      >\n                        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                        </svg>\n                      </button>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"empty-message\">Нет папок. Создайте первую!</div>\n                )}\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"sidebar-section\">\n            <div className=\"sidebar-header\">\n              <h3>\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ display: 'inline-block', verticalAlign: 'middle', marginRight: '8px' }}>\n                  <path d=\"M20.59 13.41L13.42 20.58C13.2343 20.766 13.0137 20.9135 12.7709 21.0141C12.5281 21.1148 12.2678 21.1666 12.005 21.1666C11.7422 21.1666 11.4819 21.1148 11.2391 21.0141C10.9963 20.9135 10.7757 20.766 10.59 20.58L2.93 12.93C2.54371 12.5437 2.26852 12.0572 2.13389 11.527C1.99926 10.9968 2.01024 10.4447 2.16569 9.92196C2.32113 9.39924 2.61489 8.92677 3.01482 8.55685C3.41475 8.18692 3.90508 7.93361 4.42818 7.82578C4.95129 7.71796 5.48817 7.7593 5.99007 7.94505C6.49197 8.1308 6.93807 8.45473 7.28 8.88L8.34 10.34L15.66 3.02C16.0463 2.63371 16.5328 2.35852 17.063 2.22389C17.5932 2.08926 18.1453 2.10024 18.668 2.25569C19.1908 2.41113 19.6632 2.70489 20.0332 3.10482C20.4031 3.50475 20.6564 3.99508 20.7642 4.51818C20.872 5.04129 20.8307 5.57817 20.6449 6.08007C20.4592 6.58197 20.1353 7.02807 19.71 7.37L18.15 8.93L20.59 11.37C20.976 11.7567 21.2505 12.2428 21.3844 12.7727C21.5183 13.3026 21.5065 13.8544 21.3502 14.377C21.1939 14.8996 20.8993 15.3718 20.4986 15.7414C20.0979 16.111 19.6069 16.364 19.0833 16.4718C18.5597 16.5796 18.0225 16.5381 17.5204 16.3522C17.0183 16.1663 16.5721 15.8422 16.23 15.42L13.79 12.98L12.23 14.54L13.41 15.72C13.596 15.906 13.7435 16.1266 13.8441 16.3694C13.9448 16.6122 13.9966 16.8725 13.9966 17.1353C13.9966 17.3981 13.9448 17.6584 13.8441 17.9012C13.7435 18.144 13.596 18.3646 13.41 18.5506C13.224 18.7366 13.0034 18.8841 12.7606 18.9848C12.5178 19.0854 12.2575 19.1372 11.9947 19.1372C11.7319 19.1372 11.4716 19.0854 11.2288 18.9848C10.986 18.8841 10.7654 18.7366 10.5794 18.5506L2.93 10.93\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n                Теги\n              </h3>\n              <button\n                className=\"btn-add\"\n                onClick={() => {\n                  if (!user && onAuthRequired) {\n                    onAuthRequired();\n                  } else {\n                    setShowTagForm(!showTagForm);\n                  }\n                }}\n                title={user ? \"Создать тег\" : \"Войдите, чтобы создать тег\"}\n                disabled={!user}\n              >\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M12 5V19M5 12H19\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                </svg>\n              </button>\n            </div>\n            {showTagForm && (\n              <TagForm\n                onSubmit={handleTagCreate}\n                onCancel={() => setShowTagForm(false)}\n              />\n            )}\n            {loading ? (\n              <div className=\"loading-message\">\n                {!user ? 'Создайте новую папку или создайте новый тег' : 'Загрузка...'}\n              </div>\n            ) : (\n              <div className=\"tag-list\">\n                {Array.isArray(tags) && tags.length > 0 ? (\n                  tags\n                    .sort((a, b) => (b.usage_count || 0) - (a.usage_count || 0))\n                    .map(tag => (\n                      <div\n                        key={tag.id}\n                        className=\"tag-item-wrapper\"\n                        style={{\n                          backgroundColor: selectedTags.includes(tag.id) ? (tag.color || '#FFD700') : 'transparent',\n                          borderColor: tag.color || '#FFD700',\n                        }}\n                      >\n                        <button\n                          className={`tag-item ${selectedTags.includes(tag.id) ? 'active' : ''}`}\n                          onClick={() => toggleTag(tag.id)}\n                          onContextMenu={(e) => handleContextMenu(e, 'tag', tag)}\n                          style={{\n                            backgroundColor: 'transparent',\n                            border: 'none',\n                            color: selectedTags.includes(tag.id) ? '#fff' : (tag.color || '#FFD700'),\n                          }}\n                        >\n                          {tag.name}\n                          {(tag.usage_count || tag.notes_count || 0) > 0 && (\n                            <span className=\"tag-count\">({tag.usage_count || tag.notes_count || 0})</span>\n                          )}\n                        </button>\n                        <button\n                          className=\"tag-delete-btn\"\n                          onClick={(e) => handleTagDelete(tag.id, e)}\n                          title=\"Удалить тег\"\n                        >\n                          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                          </svg>\n                        </button>\n                      </div>\n                    ))\n                ) : (\n                  <div className=\"empty-message\">Нет тегов. Создайте первый!</div>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n      </SidebarTabs>\n      </aside>\n    </>\n  );\n});\n\nSidebar.displayName = 'Sidebar';\n\nexport default Sidebar;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}