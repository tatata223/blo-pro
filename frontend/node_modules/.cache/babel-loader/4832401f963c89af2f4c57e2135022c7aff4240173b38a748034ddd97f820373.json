{"ast":null,"code":"import React,{useState,memo,useEffect}from'react';import toast from'react-hot-toast';import{foldersAPI,tagsAPI,templatesAPI}from'../../api/api';import FolderForm from'./FolderForm';import TagForm from'./TagForm';import SidebarTabs from'./SidebarTabs';import SkeletonList from'../Skeleton/SkeletonList';import'./Sidebar.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sidebar=/*#__PURE__*/memo(_ref=>{let{folders,tags,selectedFolder,selectedTags,onFolderSelect,onTagSelect,onFolderCreate,onTagCreate,onTemplateSelect,loading=false}=_ref;const[activeTab,setActiveTab]=useState('folders');const[showFolderForm,setShowFolderForm]=useState(false);const[showTagForm,setShowTagForm]=useState(false);const[templates,setTemplates]=useState([]);const[showTemplates,setShowTemplates]=useState(false);const[loadingTemplates,setLoadingTemplates]=useState(false);const handleFolderCreate=async folderData=>{try{console.log('Creating folder with data:',folderData);const response=await foldersAPI.create(folderData);console.log('Folder creation response:',response);// Проверяем успешный ответ\nif(response&&(response.status===201||response.status===200||response.data)){setShowFolderForm(false);toast.success('Папка успешно создана!');// Принудительно обновляем список папок\nif(onFolderCreate){console.log('Calling onFolderCreate to refresh folders');await onFolderCreate();}else{console.warn('onFolderCreate callback is not provided');}}else{throw new Error('Неожиданный ответ от сервера');}}catch(error){var _error$response,_error$response$data,_error$response2,_error$response2$data,_error$response3,_error$response3$data;console.error('Error creating folder:',error);console.error('Error response:',error.response);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message||'Ошибка при создании папки. Попробуйте еще раз.';toast.error(errorMessage);}};const handleTagCreate=async tagData=>{try{console.log('Creating tag with data:',tagData);const response=await tagsAPI.create(tagData);console.log('Tag creation response:',response);// Проверяем успешный ответ\nif(response&&(response.status===201||response.status===200||response.data)){setShowTagForm(false);toast.success('Тег успешно создан!');// Принудительно обновляем список тегов\nif(onTagCreate){console.log('Calling onTagCreate to refresh tags');await onTagCreate();}else{console.warn('onTagCreate callback is not provided');}}else{throw new Error('Неожиданный ответ от сервера');}}catch(error){var _error$response4,_error$response4$data,_error$response5,_error$response5$data,_error$response6,_error$response6$data;console.error('Error creating tag:',error);console.error('Error response:',error.response);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||error.message||'Ошибка при создании тега. Попробуйте еще раз.';toast.error(errorMessage);}};const toggleTag=tagId=>{if(selectedTags.includes(tagId)){onTagSelect(selectedTags.filter(id=>id!==tagId));}else{onTagSelect([...selectedTags,tagId]);}};const handleContextMenu=(e,type,item)=>{e.preventDefault();// TODO: Показать контекстное меню\nconsole.log('Context menu:',type,item);};const handleFolderDelete=async(folderId,e)=>{e.stopPropagation();try{await foldersAPI.delete(folderId);toast.success('Папка удалена');if(onFolderCreate){await onFolderCreate();}// Если удаленная папка была выбрана, сбрасываем выбор\nif(selectedFolder===folderId){onFolderSelect(null);}}catch(error){var _error$response7,_error$response7$data;console.error('Error deleting folder:',error);toast.error(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'Ошибка при удалении папки');}};const handleTagDelete=async(tagId,e)=>{e.stopPropagation();try{await tagsAPI.delete(tagId);toast.success('Тег удален');if(onTagCreate){await onTagCreate();}// Убираем тег из выбранных, если он был выбран\nif(selectedTags.includes(tagId)){onTagSelect(selectedTags.filter(id=>id!==tagId));}}catch(error){var _error$response8,_error$response8$data;console.error('Error deleting tag:',error);toast.error(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||'Ошибка при удалении тега');}};useEffect(()=>{if(showTemplates&&templates.length===0){loadTemplates();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[showTemplates]);const loadTemplates=async()=>{try{var _response$data,_response$data2;setLoadingTemplates(true);console.log('Loading templates...');const response=await templatesAPI.getAll();console.log('Templates API response:',response);console.log('Response data:',response.data);// Обрабатываем разные форматы ответа\nlet templatesData=[];if(Array.isArray(response.data)){templatesData=response.data;}else if((_response$data=response.data)!==null&&_response$data!==void 0&&_response$data.results&&Array.isArray(response.data.results)){templatesData=response.data.results;}else if((_response$data2=response.data)!==null&&_response$data2!==void 0&&_response$data2.templates&&Array.isArray(response.data.templates)){templatesData=response.data.templates;}console.log('Parsed templates:',templatesData);console.log('Templates count:',templatesData.length);if(templatesData.length===0){console.warn('No templates found in response');console.warn('Response structure:',JSON.stringify(response.data,null,2));}else{console.log(\"Successfully loaded \".concat(templatesData.length,\" templates\"));}setTemplates(templatesData);}catch(error){var _error$response9;console.error('Error loading templates:',error);console.error('Error response:',error.response);console.error('Error details:',(_error$response9=error.response)===null||_error$response9===void 0?void 0:_error$response9.data);setTemplates([]);toast.error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u043E\\u0432: \".concat(error.message||'Неизвестная ошибка'));}finally{setLoadingTemplates(false);}};const handleTemplateClick=template=>{if(onTemplateSelect){onTemplateSelect(template);}setShowTemplates(false);};return/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-templates-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-templates-btn\",onClick:()=>setShowTemplates(!showTemplates),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M14 2V8H20\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M16 13H8\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M16 17H8\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M10 9H9H8\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})]}),\"\\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\\u044B\",/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",style:{transform:showTemplates?'rotate(180deg)':'rotate(0deg)',transition:'transform 0.3s'},children:/*#__PURE__*/_jsx(\"path\",{d:\"M6 9L12 15L18 9\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})]}),showTemplates&&/*#__PURE__*/_jsx(\"div\",{className:\"templates-list\",children:loadingTemplates?/*#__PURE__*/_jsx(SkeletonList,{count:3}):templates.length>0?templates.map(template=>{console.log('Rendering template:',template);return/*#__PURE__*/_jsxs(\"div\",{className:\"template-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"template-item-content\",children:[template.icon_svg&&/*#__PURE__*/_jsx(\"div\",{className:\"template-icon\",dangerouslySetInnerHTML:{__html:template.icon_svg}}),/*#__PURE__*/_jsxs(\"div\",{className:\"template-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"template-name\",children:template.name||template.template_name||'Без названия'}),(template.category||template.template_category)&&/*#__PURE__*/_jsx(\"span\",{className:\"template-category\",children:template.category||template.template_category}),template.description&&/*#__PURE__*/_jsx(\"span\",{className:\"template-description\",children:template.description})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"template-actions\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"template-create-btn\",onClick:e=>{e.stopPropagation();console.log('Create note from template:',template);handleTemplateClick(template);},children:[/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})}),\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0443\"]})})]},template.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-message\",children:[\"\\u041D\\u0435\\u0442 \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u043E\\u0432\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{style:{fontSize:'11px',opacity:0.7},children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u044C\\u0442\\u0435 \\u043A\\u043E\\u043D\\u0441\\u043E\\u043B\\u044C \\u0434\\u043B\\u044F \\u0434\\u0435\\u0442\\u0430\\u043B\\u0435\\u0439\"})]})})]}),/*#__PURE__*/_jsx(SidebarTabs,{activeTab:activeTab,onTabChange:setActiveTab,children:activeTab==='folders'?/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",style:{display:'inline-block',verticalAlign:'middle',marginRight:'8px'},children:[/*#__PURE__*/_jsx(\"path\",{d:\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 3V21\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})]}),\"\\u041F\\u0430\\u043F\\u043A\\u0438\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:()=>setShowFolderForm(!showFolderForm),title:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u0430\\u043F\\u043A\\u0443\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]}),showFolderForm&&/*#__PURE__*/_jsx(FolderForm,{onSubmit:handleFolderCreate,onCancel:()=>setShowFolderForm(false)}),loading?/*#__PURE__*/_jsx(SkeletonList,{count:5}):/*#__PURE__*/_jsxs(\"div\",{className:\"folder-list\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"folder-item \".concat(selectedFolder===null?'active':''),onClick:()=>onFolderSelect(null),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",style:{marginRight:'8px'},children:[/*#__PURE__*/_jsx(\"path\",{d:\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 3V21\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})]}),\"\\u0412\\u0441\\u0435 \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0438\"]}),Array.isArray(folders)&&folders.length>0?folders.map(folder=>/*#__PURE__*/_jsxs(\"div\",{className:\"folder-item-wrapper \".concat(selectedFolder===folder.id?'active':''),style:{borderLeftColor:folder.color||'#90EE90'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"folder-item \".concat(selectedFolder===folder.id?'active':''),onClick:()=>onFolderSelect(folder.id),onContextMenu:e=>handleContextMenu(e,'folder',folder),children:[folder.is_favorite&&/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"currentColor\",style:{marginRight:'4px'},children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\",fill:\"currentColor\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"folder-name\",children:folder.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"folder-count\",children:[\"(\",folder.notes_count||0,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"folder-delete-btn\",onClick:e=>handleFolderDelete(folder.id,e),title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043F\\u0430\\u043F\\u043A\\u0443\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18 6L6 18M6 6L18 18\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]},folder.id)):/*#__PURE__*/_jsx(\"div\",{className:\"empty-message\",children:\"\\u041D\\u0435\\u0442 \\u043F\\u0430\\u043F\\u043E\\u043A. \\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u0443\\u044E!\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",style:{display:'inline-block',verticalAlign:'middle',marginRight:'8px'},children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.59 13.41L13.42 20.58C13.2343 20.766 13.0137 20.9135 12.7709 21.0141C12.5281 21.1148 12.2678 21.1666 12.005 21.1666C11.7422 21.1666 11.4819 21.1148 11.2391 21.0141C10.9963 20.9135 10.7757 20.766 10.59 20.58L2.93 12.93C2.54371 12.5437 2.26852 12.0572 2.13389 11.527C1.99926 10.9968 2.01024 10.4447 2.16569 9.92196C2.32113 9.39924 2.61489 8.92677 3.01482 8.55685C3.41475 8.18692 3.90508 7.93361 4.42818 7.82578C4.95129 7.71796 5.48817 7.7593 5.99007 7.94505C6.49197 8.1308 6.93807 8.45473 7.28 8.88L8.34 10.34L15.66 3.02C16.0463 2.63371 16.5328 2.35852 17.063 2.22389C17.5932 2.08926 18.1453 2.10024 18.668 2.25569C19.1908 2.41113 19.6632 2.70489 20.0332 3.10482C20.4031 3.50475 20.6564 3.99508 20.7642 4.51818C20.872 5.04129 20.8307 5.57817 20.6449 6.08007C20.4592 6.58197 20.1353 7.02807 19.71 7.37L18.15 8.93L20.59 11.37C20.976 11.7567 21.2505 12.2428 21.3844 12.7727C21.5183 13.3026 21.5065 13.8544 21.3502 14.377C21.1939 14.8996 20.8993 15.3718 20.4986 15.7414C20.0979 16.111 19.6069 16.364 19.0833 16.4718C18.5597 16.5796 18.0225 16.5381 17.5204 16.3522C17.0183 16.1663 16.5721 15.8422 16.23 15.42L13.79 12.98L12.23 14.54L13.41 15.72C13.596 15.906 13.7435 16.1266 13.8441 16.3694C13.9448 16.6122 13.9966 16.8725 13.9966 17.1353C13.9966 17.3981 13.9448 17.6584 13.8441 17.9012C13.7435 18.144 13.596 18.3646 13.41 18.5506C13.224 18.7366 13.0034 18.8841 12.7606 18.9848C12.5178 19.0854 12.2575 19.1372 11.9947 19.1372C11.7319 19.1372 11.4716 19.0854 11.2288 18.9848C10.986 18.8841 10.7654 18.7366 10.5794 18.5506L2.93 10.93\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})}),\"\\u0422\\u0435\\u0433\\u0438\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:()=>setShowTagForm(!showTagForm),title:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0442\\u0435\\u0433\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 5V19M5 12H19\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]}),showTagForm&&/*#__PURE__*/_jsx(TagForm,{onSubmit:handleTagCreate,onCancel:()=>setShowTagForm(false)}),loading?/*#__PURE__*/_jsx(SkeletonList,{count:5}):/*#__PURE__*/_jsx(\"div\",{className:\"tag-list\",children:Array.isArray(tags)&&tags.length>0?tags.sort((a,b)=>(b.usage_count||0)-(a.usage_count||0)).map(tag=>/*#__PURE__*/_jsxs(\"div\",{className:\"tag-item-wrapper\",style:{backgroundColor:selectedTags.includes(tag.id)?tag.color||'#FFD700':'transparent',borderColor:tag.color||'#FFD700'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"tag-item \".concat(selectedTags.includes(tag.id)?'active':''),onClick:()=>toggleTag(tag.id),onContextMenu:e=>handleContextMenu(e,'tag',tag),style:{backgroundColor:'transparent',border:'none',color:selectedTags.includes(tag.id)?'#fff':tag.color||'#FFD700'},children:[tag.name,(tag.usage_count||tag.notes_count||0)>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"tag-count\",children:[\"(\",tag.usage_count||tag.notes_count||0,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"tag-delete-btn\",onClick:e=>handleTagDelete(tag.id,e),title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0442\\u0435\\u0433\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18 6L6 18M6 6L18 18\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\"})})})]},tag.id)):/*#__PURE__*/_jsx(\"div\",{className:\"empty-message\",children:\"\\u041D\\u0435\\u0442 \\u0442\\u0435\\u0433\\u043E\\u0432. \\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u044B\\u0439!\"})})]})})]});});Sidebar.displayName='Sidebar';export default Sidebar;","map":{"version":3,"names":["React","useState","memo","useEffect","toast","foldersAPI","tagsAPI","templatesAPI","FolderForm","TagForm","SidebarTabs","SkeletonList","jsx","_jsx","jsxs","_jsxs","Sidebar","_ref","folders","tags","selectedFolder","selectedTags","onFolderSelect","onTagSelect","onFolderCreate","onTagCreate","onTemplateSelect","loading","activeTab","setActiveTab","showFolderForm","setShowFolderForm","showTagForm","setShowTagForm","templates","setTemplates","showTemplates","setShowTemplates","loadingTemplates","setLoadingTemplates","handleFolderCreate","folderData","console","log","response","create","status","data","success","warn","Error","error","_error$response","_error$response$data","_error$response2","_error$response2$data","_error$response3","_error$response3$data","errorMessage","detail","message","handleTagCreate","tagData","_error$response4","_error$response4$data","_error$response5","_error$response5$data","_error$response6","_error$response6$data","toggleTag","tagId","includes","filter","id","handleContextMenu","e","type","item","preventDefault","handleFolderDelete","folderId","stopPropagation","delete","_error$response7","_error$response7$data","handleTagDelete","_error$response8","_error$response8$data","length","loadTemplates","_response$data","_response$data2","getAll","templatesData","Array","isArray","results","JSON","stringify","concat","_error$response9","handleTemplateClick","template","className","children","onClick","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","style","transform","transition","count","map","icon_svg","dangerouslySetInnerHTML","__html","name","template_name","category","template_category","description","fontSize","opacity","onTabChange","display","verticalAlign","marginRight","title","onSubmit","onCancel","folder","borderLeftColor","color","onContextMenu","is_favorite","notes_count","sort","a","b","usage_count","tag","backgroundColor","borderColor","border","displayName"],"sources":["/Users/mikhail/Downloads/ЗаметкиPARADIZE/frontend/src/components/Sidebar/Sidebar.js"],"sourcesContent":["import React, { useState, memo, useEffect } from 'react';\nimport toast from 'react-hot-toast';\nimport { foldersAPI, tagsAPI, templatesAPI } from '../../api/api';\nimport FolderForm from './FolderForm';\nimport TagForm from './TagForm';\nimport SidebarTabs from './SidebarTabs';\nimport SkeletonList from '../Skeleton/SkeletonList';\nimport './Sidebar.css';\n\nconst Sidebar = memo(({\n  folders,\n  tags,\n  selectedFolder,\n  selectedTags,\n  onFolderSelect,\n  onTagSelect,\n  onFolderCreate,\n  onTagCreate,\n  onTemplateSelect,\n  loading = false,\n}) => {\n  const [activeTab, setActiveTab] = useState('folders');\n  const [showFolderForm, setShowFolderForm] = useState(false);\n  const [showTagForm, setShowTagForm] = useState(false);\n  const [templates, setTemplates] = useState([]);\n  const [showTemplates, setShowTemplates] = useState(false);\n  const [loadingTemplates, setLoadingTemplates] = useState(false);\n\n  const handleFolderCreate = async (folderData) => {\n    try {\n      console.log('Creating folder with data:', folderData);\n      const response = await foldersAPI.create(folderData);\n      console.log('Folder creation response:', response);\n      \n      // Проверяем успешный ответ\n      if (response && (response.status === 201 || response.status === 200 || response.data)) {\n        setShowFolderForm(false);\n        toast.success('Папка успешно создана!');\n        \n        // Принудительно обновляем список папок\n        if (onFolderCreate) {\n          console.log('Calling onFolderCreate to refresh folders');\n          await onFolderCreate();\n        } else {\n          console.warn('onFolderCreate callback is not provided');\n        }\n      } else {\n        throw new Error('Неожиданный ответ от сервера');\n      }\n    } catch (error) {\n      console.error('Error creating folder:', error);\n      console.error('Error response:', error.response);\n      const errorMessage = error.response?.data?.error || \n                          error.response?.data?.detail || \n                          error.response?.data?.message ||\n                          error.message || \n                          'Ошибка при создании папки. Попробуйте еще раз.';\n      toast.error(errorMessage);\n    }\n  };\n\n  const handleTagCreate = async (tagData) => {\n    try {\n      console.log('Creating tag with data:', tagData);\n      const response = await tagsAPI.create(tagData);\n      console.log('Tag creation response:', response);\n      \n      // Проверяем успешный ответ\n      if (response && (response.status === 201 || response.status === 200 || response.data)) {\n        setShowTagForm(false);\n        toast.success('Тег успешно создан!');\n        \n        // Принудительно обновляем список тегов\n        if (onTagCreate) {\n          console.log('Calling onTagCreate to refresh tags');\n          await onTagCreate();\n        } else {\n          console.warn('onTagCreate callback is not provided');\n        }\n      } else {\n        throw new Error('Неожиданный ответ от сервера');\n      }\n    } catch (error) {\n      console.error('Error creating tag:', error);\n      console.error('Error response:', error.response);\n      const errorMessage = error.response?.data?.error || \n                          error.response?.data?.detail || \n                          error.response?.data?.message ||\n                          error.message || \n                          'Ошибка при создании тега. Попробуйте еще раз.';\n      toast.error(errorMessage);\n    }\n  };\n\n  const toggleTag = (tagId) => {\n    if (selectedTags.includes(tagId)) {\n      onTagSelect(selectedTags.filter(id => id !== tagId));\n    } else {\n      onTagSelect([...selectedTags, tagId]);\n    }\n  };\n\n  const handleContextMenu = (e, type, item) => {\n    e.preventDefault();\n    // TODO: Показать контекстное меню\n    console.log('Context menu:', type, item);\n  };\n\n  const handleFolderDelete = async (folderId, e) => {\n    e.stopPropagation();\n    try {\n      await foldersAPI.delete(folderId);\n      toast.success('Папка удалена');\n      if (onFolderCreate) {\n        await onFolderCreate();\n      }\n      // Если удаленная папка была выбрана, сбрасываем выбор\n      if (selectedFolder === folderId) {\n        onFolderSelect(null);\n      }\n    } catch (error) {\n      console.error('Error deleting folder:', error);\n      toast.error(error.response?.data?.error || 'Ошибка при удалении папки');\n    }\n  };\n\n  const handleTagDelete = async (tagId, e) => {\n    e.stopPropagation();\n    try {\n      await tagsAPI.delete(tagId);\n      toast.success('Тег удален');\n      if (onTagCreate) {\n        await onTagCreate();\n      }\n      // Убираем тег из выбранных, если он был выбран\n      if (selectedTags.includes(tagId)) {\n        onTagSelect(selectedTags.filter(id => id !== tagId));\n      }\n    } catch (error) {\n      console.error('Error deleting tag:', error);\n      toast.error(error.response?.data?.error || 'Ошибка при удалении тега');\n    }\n  };\n\n  useEffect(() => {\n    if (showTemplates && templates.length === 0) {\n      loadTemplates();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showTemplates]);\n\n  const loadTemplates = async () => {\n    try {\n      setLoadingTemplates(true);\n      console.log('Loading templates...');\n      const response = await templatesAPI.getAll();\n      console.log('Templates API response:', response);\n      console.log('Response data:', response.data);\n      \n      // Обрабатываем разные форматы ответа\n      let templatesData = [];\n      if (Array.isArray(response.data)) {\n        templatesData = response.data;\n      } else if (response.data?.results && Array.isArray(response.data.results)) {\n        templatesData = response.data.results;\n      } else if (response.data?.templates && Array.isArray(response.data.templates)) {\n        templatesData = response.data.templates;\n      }\n      \n      console.log('Parsed templates:', templatesData);\n      console.log('Templates count:', templatesData.length);\n      \n      if (templatesData.length === 0) {\n        console.warn('No templates found in response');\n        console.warn('Response structure:', JSON.stringify(response.data, null, 2));\n      } else {\n        console.log(`Successfully loaded ${templatesData.length} templates`);\n      }\n      \n      setTemplates(templatesData);\n    } catch (error) {\n      console.error('Error loading templates:', error);\n      console.error('Error response:', error.response);\n      console.error('Error details:', error.response?.data);\n      setTemplates([]);\n      toast.error(`Ошибка загрузки шаблонов: ${error.message || 'Неизвестная ошибка'}`);\n    } finally {\n      setLoadingTemplates(false);\n    }\n  };\n\n  const handleTemplateClick = (template) => {\n    if (onTemplateSelect) {\n      onTemplateSelect(template);\n    }\n    setShowTemplates(false);\n  };\n\n  return (\n    <aside className=\"sidebar\">\n      <div className=\"sidebar-templates-section\">\n        <button\n          className=\"sidebar-templates-btn\"\n          onClick={() => setShowTemplates(!showTemplates)}\n        >\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            <path d=\"M14 2V8H20\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            <path d=\"M16 13H8\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n            <path d=\"M16 17H8\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n            <path d=\"M10 9H9H8\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n          </svg>\n          Шаблоны\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ transform: showTemplates ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.3s' }}>\n            <path d=\"M6 9L12 15L18 9\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n        </button>\n        {showTemplates && (\n          <div className=\"templates-list\">\n            {loadingTemplates ? (\n              <SkeletonList count={3} />\n            ) : templates.length > 0 ? (\n              templates.map(template => {\n                console.log('Rendering template:', template);\n                return (\n                  <div\n                    key={template.id}\n                    className=\"template-item\"\n                  >\n                    <div className=\"template-item-content\">\n                      {template.icon_svg && (\n                        <div \n                          className=\"template-icon\"\n                          dangerouslySetInnerHTML={{ __html: template.icon_svg }}\n                        />\n                      )}\n                      <div className=\"template-info\">\n                        <span className=\"template-name\">\n                          {template.name || template.template_name || 'Без названия'}\n                        </span>\n                        {(template.category || template.template_category) && (\n                          <span className=\"template-category\">\n                            {template.category || template.template_category}\n                          </span>\n                        )}\n                        {template.description && (\n                          <span className=\"template-description\">\n                            {template.description}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"template-actions\">\n                      <button\n                        className=\"template-create-btn\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          console.log('Create note from template:', template);\n                          handleTemplateClick(template);\n                        }}\n                      >\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path d=\"M12 5V19M5 12H19\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                        </svg>\n                        Создать заметку\n                      </button>\n                    </div>\n                  </div>\n                );\n              })\n            ) : (\n              <div className=\"empty-message\">\n                Нет шаблонов\n                <br />\n                <small style={{ fontSize: '11px', opacity: 0.7 }}>\n                  Проверьте консоль для деталей\n                </small>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      <SidebarTabs activeTab={activeTab} onTabChange={setActiveTab}>\n        {activeTab === 'folders' ? (\n          <div className=\"sidebar-section\">\n            <div className=\"sidebar-header\">\n              <h3>\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ display: 'inline-block', verticalAlign: 'middle', marginRight: '8px' }}>\n                  <path d=\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                  <path d=\"M7 3V21\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                </svg>\n                Папки\n              </h3>\n              <button\n                className=\"btn-add\"\n                onClick={() => setShowFolderForm(!showFolderForm)}\n                title=\"Создать папку\"\n              >\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M12 5V19M5 12H19\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                </svg>\n              </button>\n            </div>\n            {showFolderForm && (\n              <FolderForm\n                onSubmit={handleFolderCreate}\n                onCancel={() => setShowFolderForm(false)}\n              />\n            )}\n            {loading ? (\n              <SkeletonList count={5} />\n            ) : (\n              <div className=\"folder-list\">\n                <button\n                  className={`folder-item ${selectedFolder === null ? 'active' : ''}`}\n                  onClick={() => onFolderSelect(null)}\n                >\n                  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ marginRight: '8px' }}>\n                    <path d=\"M3 7V5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                    <path d=\"M7 3V21\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                  </svg>\n                  Все заметки\n                </button>\n                {Array.isArray(folders) && folders.length > 0 ? (\n                  folders.map(folder => (\n                    <div\n                      key={folder.id}\n                      className={`folder-item-wrapper ${selectedFolder === folder.id ? 'active' : ''}`}\n                      style={{ borderLeftColor: folder.color || '#90EE90' }}\n                    >\n                      <button\n                        className={`folder-item ${selectedFolder === folder.id ? 'active' : ''}`}\n                        onClick={() => onFolderSelect(folder.id)}\n                        onContextMenu={(e) => handleContextMenu(e, 'folder', folder)}\n                      >\n                        {folder.is_favorite && (\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style={{ marginRight: '4px' }}>\n                            <path d=\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\" fill=\"currentColor\"/>\n                          </svg>\n                        )}\n                        <span className=\"folder-name\">{folder.name}</span>\n                        <span className=\"folder-count\">({folder.notes_count || 0})</span>\n                      </button>\n                      <button\n                        className=\"folder-delete-btn\"\n                        onClick={(e) => handleFolderDelete(folder.id, e)}\n                        title=\"Удалить папку\"\n                      >\n                        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                        </svg>\n                      </button>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"empty-message\">Нет папок. Создайте первую!</div>\n                )}\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"sidebar-section\">\n            <div className=\"sidebar-header\">\n              <h3>\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ display: 'inline-block', verticalAlign: 'middle', marginRight: '8px' }}>\n                  <path d=\"M20.59 13.41L13.42 20.58C13.2343 20.766 13.0137 20.9135 12.7709 21.0141C12.5281 21.1148 12.2678 21.1666 12.005 21.1666C11.7422 21.1666 11.4819 21.1148 11.2391 21.0141C10.9963 20.9135 10.7757 20.766 10.59 20.58L2.93 12.93C2.54371 12.5437 2.26852 12.0572 2.13389 11.527C1.99926 10.9968 2.01024 10.4447 2.16569 9.92196C2.32113 9.39924 2.61489 8.92677 3.01482 8.55685C3.41475 8.18692 3.90508 7.93361 4.42818 7.82578C4.95129 7.71796 5.48817 7.7593 5.99007 7.94505C6.49197 8.1308 6.93807 8.45473 7.28 8.88L8.34 10.34L15.66 3.02C16.0463 2.63371 16.5328 2.35852 17.063 2.22389C17.5932 2.08926 18.1453 2.10024 18.668 2.25569C19.1908 2.41113 19.6632 2.70489 20.0332 3.10482C20.4031 3.50475 20.6564 3.99508 20.7642 4.51818C20.872 5.04129 20.8307 5.57817 20.6449 6.08007C20.4592 6.58197 20.1353 7.02807 19.71 7.37L18.15 8.93L20.59 11.37C20.976 11.7567 21.2505 12.2428 21.3844 12.7727C21.5183 13.3026 21.5065 13.8544 21.3502 14.377C21.1939 14.8996 20.8993 15.3718 20.4986 15.7414C20.0979 16.111 19.6069 16.364 19.0833 16.4718C18.5597 16.5796 18.0225 16.5381 17.5204 16.3522C17.0183 16.1663 16.5721 15.8422 16.23 15.42L13.79 12.98L12.23 14.54L13.41 15.72C13.596 15.906 13.7435 16.1266 13.8441 16.3694C13.9448 16.6122 13.9966 16.8725 13.9966 17.1353C13.9966 17.3981 13.9448 17.6584 13.8441 17.9012C13.7435 18.144 13.596 18.3646 13.41 18.5506C13.224 18.7366 13.0034 18.8841 12.7606 18.9848C12.5178 19.0854 12.2575 19.1372 11.9947 19.1372C11.7319 19.1372 11.4716 19.0854 11.2288 18.9848C10.986 18.8841 10.7654 18.7366 10.5794 18.5506L2.93 10.93\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n                Теги\n              </h3>\n              <button\n                className=\"btn-add\"\n                onClick={() => setShowTagForm(!showTagForm)}\n                title=\"Создать тег\"\n              >\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M12 5V19M5 12H19\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                </svg>\n              </button>\n            </div>\n            {showTagForm && (\n              <TagForm\n                onSubmit={handleTagCreate}\n                onCancel={() => setShowTagForm(false)}\n              />\n            )}\n            {loading ? (\n              <SkeletonList count={5} />\n            ) : (\n              <div className=\"tag-list\">\n                {Array.isArray(tags) && tags.length > 0 ? (\n                  tags\n                    .sort((a, b) => (b.usage_count || 0) - (a.usage_count || 0))\n                    .map(tag => (\n                      <div\n                        key={tag.id}\n                        className=\"tag-item-wrapper\"\n                        style={{\n                          backgroundColor: selectedTags.includes(tag.id) ? (tag.color || '#FFD700') : 'transparent',\n                          borderColor: tag.color || '#FFD700',\n                        }}\n                      >\n                        <button\n                          className={`tag-item ${selectedTags.includes(tag.id) ? 'active' : ''}`}\n                          onClick={() => toggleTag(tag.id)}\n                          onContextMenu={(e) => handleContextMenu(e, 'tag', tag)}\n                          style={{\n                            backgroundColor: 'transparent',\n                            border: 'none',\n                            color: selectedTags.includes(tag.id) ? '#fff' : (tag.color || '#FFD700'),\n                          }}\n                        >\n                          {tag.name}\n                          {(tag.usage_count || tag.notes_count || 0) > 0 && (\n                            <span className=\"tag-count\">({tag.usage_count || tag.notes_count || 0})</span>\n                          )}\n                        </button>\n                        <button\n                          className=\"tag-delete-btn\"\n                          onClick={(e) => handleTagDelete(tag.id, e)}\n                          title=\"Удалить тег\"\n                        >\n                          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n                          </svg>\n                        </button>\n                      </div>\n                    ))\n                ) : (\n                  <div className=\"empty-message\">Нет тегов. Создайте первый!</div>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n      </SidebarTabs>\n    </aside>\n  );\n});\n\nSidebar.displayName = 'Sidebar';\n\nexport default Sidebar;\n\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,IAAI,CAAEC,SAAS,KAAQ,OAAO,CACxD,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CACnC,OAASC,UAAU,CAAEC,OAAO,CAAEC,YAAY,KAAQ,eAAe,CACjE,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,YAAY,KAAM,0BAA0B,CACnD,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvB,KAAM,CAAAC,OAAO,cAAGd,IAAI,CAACe,IAAA,EAWf,IAXgB,CACpBC,OAAO,CACPC,IAAI,CACJC,cAAc,CACdC,YAAY,CACZC,cAAc,CACdC,WAAW,CACXC,cAAc,CACdC,WAAW,CACXC,gBAAgB,CAChBC,OAAO,CAAG,KACZ,CAAC,CAAAV,IAAA,CACC,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAG5B,QAAQ,CAAC,SAAS,CAAC,CACrD,KAAM,CAAC6B,cAAc,CAAEC,iBAAiB,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAC+B,WAAW,CAAEC,cAAc,CAAC,CAAGhC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACiC,SAAS,CAAEC,YAAY,CAAC,CAAGlC,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACmC,aAAa,CAAEC,gBAAgB,CAAC,CAAGpC,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACqC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGtC,QAAQ,CAAC,KAAK,CAAC,CAE/D,KAAM,CAAAuC,kBAAkB,CAAG,KAAO,CAAAC,UAAU,EAAK,CAC/C,GAAI,CACFC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEF,UAAU,CAAC,CACrD,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAvC,UAAU,CAACwC,MAAM,CAACJ,UAAU,CAAC,CACpDC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEC,QAAQ,CAAC,CAElD;AACA,GAAIA,QAAQ,GAAKA,QAAQ,CAACE,MAAM,GAAK,GAAG,EAAIF,QAAQ,CAACE,MAAM,GAAK,GAAG,EAAIF,QAAQ,CAACG,IAAI,CAAC,CAAE,CACrFhB,iBAAiB,CAAC,KAAK,CAAC,CACxB3B,KAAK,CAAC4C,OAAO,CAAC,wBAAwB,CAAC,CAEvC;AACA,GAAIxB,cAAc,CAAE,CAClBkB,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC,CACxD,KAAM,CAAAnB,cAAc,CAAC,CAAC,CACxB,CAAC,IAAM,CACLkB,OAAO,CAACO,IAAI,CAAC,yCAAyC,CAAC,CACzD,CACF,CAAC,IAAM,CACL,KAAM,IAAI,CAAAC,KAAK,CAAC,8BAA8B,CAAC,CACjD,CACF,CAAE,MAAOC,KAAK,CAAE,KAAAC,eAAA,CAAAC,oBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CACdf,OAAO,CAACS,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CT,OAAO,CAACS,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAACP,QAAQ,CAAC,CAChD,KAAM,CAAAc,YAAY,CAAG,EAAAN,eAAA,CAAAD,KAAK,CAACP,QAAQ,UAAAQ,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBL,IAAI,UAAAM,oBAAA,iBAApBA,oBAAA,CAAsBF,KAAK,KAAAG,gBAAA,CAC5BH,KAAK,CAACP,QAAQ,UAAAU,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBP,IAAI,UAAAQ,qBAAA,iBAApBA,qBAAA,CAAsBI,MAAM,KAAAH,gBAAA,CAC5BL,KAAK,CAACP,QAAQ,UAAAY,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBT,IAAI,UAAAU,qBAAA,iBAApBA,qBAAA,CAAsBG,OAAO,GAC7BT,KAAK,CAACS,OAAO,EACb,gDAAgD,CACpExD,KAAK,CAAC+C,KAAK,CAACO,YAAY,CAAC,CAC3B,CACF,CAAC,CAED,KAAM,CAAAG,eAAe,CAAG,KAAO,CAAAC,OAAO,EAAK,CACzC,GAAI,CACFpB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEmB,OAAO,CAAC,CAC/C,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAtC,OAAO,CAACuC,MAAM,CAACiB,OAAO,CAAC,CAC9CpB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEC,QAAQ,CAAC,CAE/C;AACA,GAAIA,QAAQ,GAAKA,QAAQ,CAACE,MAAM,GAAK,GAAG,EAAIF,QAAQ,CAACE,MAAM,GAAK,GAAG,EAAIF,QAAQ,CAACG,IAAI,CAAC,CAAE,CACrFd,cAAc,CAAC,KAAK,CAAC,CACrB7B,KAAK,CAAC4C,OAAO,CAAC,qBAAqB,CAAC,CAEpC;AACA,GAAIvB,WAAW,CAAE,CACfiB,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAClD,KAAM,CAAAlB,WAAW,CAAC,CAAC,CACrB,CAAC,IAAM,CACLiB,OAAO,CAACO,IAAI,CAAC,sCAAsC,CAAC,CACtD,CACF,CAAC,IAAM,CACL,KAAM,IAAI,CAAAC,KAAK,CAAC,8BAA8B,CAAC,CACjD,CACF,CAAE,MAAOC,KAAK,CAAE,KAAAY,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CACd1B,OAAO,CAACS,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3CT,OAAO,CAACS,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAACP,QAAQ,CAAC,CAChD,KAAM,CAAAc,YAAY,CAAG,EAAAK,gBAAA,CAAAZ,KAAK,CAACP,QAAQ,UAAAmB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBhB,IAAI,UAAAiB,qBAAA,iBAApBA,qBAAA,CAAsBb,KAAK,KAAAc,gBAAA,CAC5Bd,KAAK,CAACP,QAAQ,UAAAqB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBlB,IAAI,UAAAmB,qBAAA,iBAApBA,qBAAA,CAAsBP,MAAM,KAAAQ,gBAAA,CAC5BhB,KAAK,CAACP,QAAQ,UAAAuB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBpB,IAAI,UAAAqB,qBAAA,iBAApBA,qBAAA,CAAsBR,OAAO,GAC7BT,KAAK,CAACS,OAAO,EACb,+CAA+C,CACnExD,KAAK,CAAC+C,KAAK,CAACO,YAAY,CAAC,CAC3B,CACF,CAAC,CAED,KAAM,CAAAW,SAAS,CAAIC,KAAK,EAAK,CAC3B,GAAIjD,YAAY,CAACkD,QAAQ,CAACD,KAAK,CAAC,CAAE,CAChC/C,WAAW,CAACF,YAAY,CAACmD,MAAM,CAACC,EAAE,EAAIA,EAAE,GAAKH,KAAK,CAAC,CAAC,CACtD,CAAC,IAAM,CACL/C,WAAW,CAAC,CAAC,GAAGF,YAAY,CAAEiD,KAAK,CAAC,CAAC,CACvC,CACF,CAAC,CAED,KAAM,CAAAI,iBAAiB,CAAGA,CAACC,CAAC,CAAEC,IAAI,CAAEC,IAAI,GAAK,CAC3CF,CAAC,CAACG,cAAc,CAAC,CAAC,CAClB;AACApC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEiC,IAAI,CAAEC,IAAI,CAAC,CAC1C,CAAC,CAED,KAAM,CAAAE,kBAAkB,CAAG,KAAAA,CAAOC,QAAQ,CAAEL,CAAC,GAAK,CAChDA,CAAC,CAACM,eAAe,CAAC,CAAC,CACnB,GAAI,CACF,KAAM,CAAA5E,UAAU,CAAC6E,MAAM,CAACF,QAAQ,CAAC,CACjC5E,KAAK,CAAC4C,OAAO,CAAC,eAAe,CAAC,CAC9B,GAAIxB,cAAc,CAAE,CAClB,KAAM,CAAAA,cAAc,CAAC,CAAC,CACxB,CACA;AACA,GAAIJ,cAAc,GAAK4D,QAAQ,CAAE,CAC/B1D,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAE,MAAO6B,KAAK,CAAE,KAAAgC,gBAAA,CAAAC,qBAAA,CACd1C,OAAO,CAACS,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9C/C,KAAK,CAAC+C,KAAK,CAAC,EAAAgC,gBAAA,CAAAhC,KAAK,CAACP,QAAQ,UAAAuC,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBpC,IAAI,UAAAqC,qBAAA,iBAApBA,qBAAA,CAAsBjC,KAAK,GAAI,2BAA2B,CAAC,CACzE,CACF,CAAC,CAED,KAAM,CAAAkC,eAAe,CAAG,KAAAA,CAAOf,KAAK,CAAEK,CAAC,GAAK,CAC1CA,CAAC,CAACM,eAAe,CAAC,CAAC,CACnB,GAAI,CACF,KAAM,CAAA3E,OAAO,CAAC4E,MAAM,CAACZ,KAAK,CAAC,CAC3BlE,KAAK,CAAC4C,OAAO,CAAC,YAAY,CAAC,CAC3B,GAAIvB,WAAW,CAAE,CACf,KAAM,CAAAA,WAAW,CAAC,CAAC,CACrB,CACA;AACA,GAAIJ,YAAY,CAACkD,QAAQ,CAACD,KAAK,CAAC,CAAE,CAChC/C,WAAW,CAACF,YAAY,CAACmD,MAAM,CAACC,EAAE,EAAIA,EAAE,GAAKH,KAAK,CAAC,CAAC,CACtD,CACF,CAAE,MAAOnB,KAAK,CAAE,KAAAmC,gBAAA,CAAAC,qBAAA,CACd7C,OAAO,CAACS,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3C/C,KAAK,CAAC+C,KAAK,CAAC,EAAAmC,gBAAA,CAAAnC,KAAK,CAACP,QAAQ,UAAA0C,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBvC,IAAI,UAAAwC,qBAAA,iBAApBA,qBAAA,CAAsBpC,KAAK,GAAI,0BAA0B,CAAC,CACxE,CACF,CAAC,CAEDhD,SAAS,CAAC,IAAM,CACd,GAAIiC,aAAa,EAAIF,SAAS,CAACsD,MAAM,GAAK,CAAC,CAAE,CAC3CC,aAAa,CAAC,CAAC,CACjB,CACA;AACF,CAAC,CAAE,CAACrD,aAAa,CAAC,CAAC,CAEnB,KAAM,CAAAqD,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,KAAAC,cAAA,CAAAC,eAAA,CACFpD,mBAAmB,CAAC,IAAI,CAAC,CACzBG,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAArC,YAAY,CAACqF,MAAM,CAAC,CAAC,CAC5ClD,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEC,QAAQ,CAAC,CAChDF,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEC,QAAQ,CAACG,IAAI,CAAC,CAE5C;AACA,GAAI,CAAA8C,aAAa,CAAG,EAAE,CACtB,GAAIC,KAAK,CAACC,OAAO,CAACnD,QAAQ,CAACG,IAAI,CAAC,CAAE,CAChC8C,aAAa,CAAGjD,QAAQ,CAACG,IAAI,CAC/B,CAAC,IAAM,IAAI,CAAA2C,cAAA,CAAA9C,QAAQ,CAACG,IAAI,UAAA2C,cAAA,WAAbA,cAAA,CAAeM,OAAO,EAAIF,KAAK,CAACC,OAAO,CAACnD,QAAQ,CAACG,IAAI,CAACiD,OAAO,CAAC,CAAE,CACzEH,aAAa,CAAGjD,QAAQ,CAACG,IAAI,CAACiD,OAAO,CACvC,CAAC,IAAM,IAAI,CAAAL,eAAA,CAAA/C,QAAQ,CAACG,IAAI,UAAA4C,eAAA,WAAbA,eAAA,CAAezD,SAAS,EAAI4D,KAAK,CAACC,OAAO,CAACnD,QAAQ,CAACG,IAAI,CAACb,SAAS,CAAC,CAAE,CAC7E2D,aAAa,CAAGjD,QAAQ,CAACG,IAAI,CAACb,SAAS,CACzC,CAEAQ,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEkD,aAAa,CAAC,CAC/CnD,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEkD,aAAa,CAACL,MAAM,CAAC,CAErD,GAAIK,aAAa,CAACL,MAAM,GAAK,CAAC,CAAE,CAC9B9C,OAAO,CAACO,IAAI,CAAC,gCAAgC,CAAC,CAC9CP,OAAO,CAACO,IAAI,CAAC,qBAAqB,CAAEgD,IAAI,CAACC,SAAS,CAACtD,QAAQ,CAACG,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC7E,CAAC,IAAM,CACLL,OAAO,CAACC,GAAG,wBAAAwD,MAAA,CAAwBN,aAAa,CAACL,MAAM,cAAY,CAAC,CACtE,CAEArD,YAAY,CAAC0D,aAAa,CAAC,CAC7B,CAAE,MAAO1C,KAAK,CAAE,KAAAiD,gBAAA,CACd1D,OAAO,CAACS,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDT,OAAO,CAACS,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAACP,QAAQ,CAAC,CAChDF,OAAO,CAACS,KAAK,CAAC,gBAAgB,EAAAiD,gBAAA,CAAEjD,KAAK,CAACP,QAAQ,UAAAwD,gBAAA,iBAAdA,gBAAA,CAAgBrD,IAAI,CAAC,CACrDZ,YAAY,CAAC,EAAE,CAAC,CAChB/B,KAAK,CAAC+C,KAAK,4IAAAgD,MAAA,CAA8BhD,KAAK,CAACS,OAAO,EAAI,oBAAoB,CAAE,CAAC,CACnF,CAAC,OAAS,CACRrB,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAA8D,mBAAmB,CAAIC,QAAQ,EAAK,CACxC,GAAI5E,gBAAgB,CAAE,CACpBA,gBAAgB,CAAC4E,QAAQ,CAAC,CAC5B,CACAjE,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,CAED,mBACEtB,KAAA,UAAOwF,SAAS,CAAC,SAAS,CAAAC,QAAA,eACxBzF,KAAA,QAAKwF,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCzF,KAAA,WACEwF,SAAS,CAAC,uBAAuB,CACjCE,OAAO,CAAEA,CAAA,GAAMpE,gBAAgB,CAAC,CAACD,aAAa,CAAE,CAAAoE,QAAA,eAEhDzF,KAAA,QAAK2F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAC,4BAA4B,CAAAN,QAAA,eAC5F3F,IAAA,SAAMkG,CAAC,CAAC,qPAAqP,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAAC,CAAC,cAClVtG,IAAA,SAAMkG,CAAC,CAAC,YAAY,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAAC,CAAC,cACzGtG,IAAA,SAAMkG,CAAC,CAAC,UAAU,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,cAChFrG,IAAA,SAAMkG,CAAC,CAAC,UAAU,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,cAChFrG,IAAA,SAAMkG,CAAC,CAAC,WAAW,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,EAC9E,CAAC,6CAEN,cAAArG,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACO,KAAK,CAAE,CAAEC,SAAS,CAAEjF,aAAa,CAAG,gBAAgB,CAAG,cAAc,CAAEkF,UAAU,CAAE,gBAAiB,CAAE,CAAAd,QAAA,cAChK3F,IAAA,SAAMkG,CAAC,CAAC,iBAAiB,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAAC,CAAC,CAC3G,CAAC,EACA,CAAC,CACR/E,aAAa,eACZvB,IAAA,QAAK0F,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BlE,gBAAgB,cACfzB,IAAA,CAACF,YAAY,EAAC4G,KAAK,CAAE,CAAE,CAAE,CAAC,CACxBrF,SAAS,CAACsD,MAAM,CAAG,CAAC,CACtBtD,SAAS,CAACsF,GAAG,CAAClB,QAAQ,EAAI,CACxB5D,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAE2D,QAAQ,CAAC,CAC5C,mBACEvF,KAAA,QAEEwF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAEzBzF,KAAA,QAAKwF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EACnCF,QAAQ,CAACmB,QAAQ,eAChB5G,IAAA,QACE0F,SAAS,CAAC,eAAe,CACzBmB,uBAAuB,CAAE,CAAEC,MAAM,CAAErB,QAAQ,CAACmB,QAAS,CAAE,CACxD,CACF,cACD1G,KAAA,QAAKwF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B3F,IAAA,SAAM0F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC5BF,QAAQ,CAACsB,IAAI,EAAItB,QAAQ,CAACuB,aAAa,EAAI,cAAc,CACtD,CAAC,CACN,CAACvB,QAAQ,CAACwB,QAAQ,EAAIxB,QAAQ,CAACyB,iBAAiB,gBAC/ClH,IAAA,SAAM0F,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAChCF,QAAQ,CAACwB,QAAQ,EAAIxB,QAAQ,CAACyB,iBAAiB,CAC5C,CACP,CACAzB,QAAQ,CAAC0B,WAAW,eACnBnH,IAAA,SAAM0F,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CACnCF,QAAQ,CAAC0B,WAAW,CACjB,CACP,EACE,CAAC,EACH,CAAC,cACNnH,IAAA,QAAK0F,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BzF,KAAA,WACEwF,SAAS,CAAC,qBAAqB,CAC/BE,OAAO,CAAG9B,CAAC,EAAK,CACdA,CAAC,CAACM,eAAe,CAAC,CAAC,CACnBvC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAE2D,QAAQ,CAAC,CACnDD,mBAAmB,CAACC,QAAQ,CAAC,CAC/B,CAAE,CAAAE,QAAA,eAEF3F,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAC,4BAA4B,CAAAN,QAAA,cAC5F3F,IAAA,SAAMkG,CAAC,CAAC,kBAAkB,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,CACrF,CAAC,wFAER,EAAQ,CAAC,CACN,CAAC,GAxCDZ,QAAQ,CAAC7B,EAyCX,CAAC,CAEV,CAAC,CAAC,cAEF1D,KAAA,QAAKwF,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,qEAE7B,cAAA3F,IAAA,QAAK,CAAC,cACNA,IAAA,UAAOuG,KAAK,CAAE,CAAEa,QAAQ,CAAE,MAAM,CAAEC,OAAO,CAAE,GAAI,CAAE,CAAA1B,QAAA,CAAC,iKAElD,CAAO,CAAC,EACL,CACN,CACE,CACN,EACE,CAAC,cAEN3F,IAAA,CAACH,WAAW,EAACkB,SAAS,CAAEA,SAAU,CAACuG,WAAW,CAAEtG,YAAa,CAAA2E,QAAA,CAC1D5E,SAAS,GAAK,SAAS,cACtBb,KAAA,QAAKwF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BzF,KAAA,QAAKwF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzF,KAAA,OAAAyF,QAAA,eACEzF,KAAA,QAAK2F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACO,KAAK,CAAE,CAAEgB,OAAO,CAAE,cAAc,CAAEC,aAAa,CAAE,QAAQ,CAAEC,WAAW,CAAE,KAAM,CAAE,CAAA9B,QAAA,eAC1I3F,IAAA,SAAMkG,CAAC,CAAC,2HAA2H,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,cACjMrG,IAAA,SAAMkG,CAAC,CAAC,SAAS,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,EAC5E,CAAC,iCAER,EAAI,CAAC,cACLrG,IAAA,WACE0F,SAAS,CAAC,SAAS,CACnBE,OAAO,CAAEA,CAAA,GAAM1E,iBAAiB,CAAC,CAACD,cAAc,CAAE,CAClDyG,KAAK,CAAC,2EAAe,CAAA/B,QAAA,cAErB3F,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAC,4BAA4B,CAAAN,QAAA,cAC5F3F,IAAA,SAAMkG,CAAC,CAAC,kBAAkB,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,CACrF,CAAC,CACA,CAAC,EACN,CAAC,CACLpF,cAAc,eACbjB,IAAA,CAACL,UAAU,EACTgI,QAAQ,CAAEhG,kBAAmB,CAC7BiG,QAAQ,CAAEA,CAAA,GAAM1G,iBAAiB,CAAC,KAAK,CAAE,CAC1C,CACF,CACAJ,OAAO,cACNd,IAAA,CAACF,YAAY,EAAC4G,KAAK,CAAE,CAAE,CAAE,CAAC,cAE1BxG,KAAA,QAAKwF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzF,KAAA,WACEwF,SAAS,gBAAAJ,MAAA,CAAiB/E,cAAc,GAAK,IAAI,CAAG,QAAQ,CAAG,EAAE,CAAG,CACpEqF,OAAO,CAAEA,CAAA,GAAMnF,cAAc,CAAC,IAAI,CAAE,CAAAkF,QAAA,eAEpCzF,KAAA,QAAK2F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACO,KAAK,CAAE,CAAEkB,WAAW,CAAE,KAAM,CAAE,CAAA9B,QAAA,eACxF3F,IAAA,SAAMkG,CAAC,CAAC,2HAA2H,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,cACjMrG,IAAA,SAAMkG,CAAC,CAAC,SAAS,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,EAC5E,CAAC,gEAER,EAAQ,CAAC,CACRpB,KAAK,CAACC,OAAO,CAAC7E,OAAO,CAAC,EAAIA,OAAO,CAACsE,MAAM,CAAG,CAAC,CAC3CtE,OAAO,CAACsG,GAAG,CAACkB,MAAM,eAChB3H,KAAA,QAEEwF,SAAS,wBAAAJ,MAAA,CAAyB/E,cAAc,GAAKsH,MAAM,CAACjE,EAAE,CAAG,QAAQ,CAAG,EAAE,CAAG,CACjF2C,KAAK,CAAE,CAAEuB,eAAe,CAAED,MAAM,CAACE,KAAK,EAAI,SAAU,CAAE,CAAApC,QAAA,eAEtDzF,KAAA,WACEwF,SAAS,gBAAAJ,MAAA,CAAiB/E,cAAc,GAAKsH,MAAM,CAACjE,EAAE,CAAG,QAAQ,CAAG,EAAE,CAAG,CACzEgC,OAAO,CAAEA,CAAA,GAAMnF,cAAc,CAACoH,MAAM,CAACjE,EAAE,CAAE,CACzCoE,aAAa,CAAGlE,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,QAAQ,CAAE+D,MAAM,CAAE,CAAAlC,QAAA,EAE5DkC,MAAM,CAACI,WAAW,eACjBjI,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,cAAc,CAACO,KAAK,CAAE,CAAEkB,WAAW,CAAE,KAAM,CAAE,CAAA9B,QAAA,cAChG3F,IAAA,SAAMkG,CAAC,CAAC,kGAAkG,CAACF,IAAI,CAAC,cAAc,CAAC,CAAC,CAC7H,CACN,cACDhG,IAAA,SAAM0F,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEkC,MAAM,CAACd,IAAI,CAAO,CAAC,cAClD7G,KAAA,SAAMwF,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAC,GAAC,CAACkC,MAAM,CAACK,WAAW,EAAI,CAAC,CAAC,GAAC,EAAM,CAAC,EAC3D,CAAC,cACTlI,IAAA,WACE0F,SAAS,CAAC,mBAAmB,CAC7BE,OAAO,CAAG9B,CAAC,EAAKI,kBAAkB,CAAC2D,MAAM,CAACjE,EAAE,CAAEE,CAAC,CAAE,CACjD4D,KAAK,CAAC,2EAAe,CAAA/B,QAAA,cAErB3F,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAC,4BAA4B,CAAAN,QAAA,cAC5F3F,IAAA,SAAMkG,CAAC,CAAC,sBAAsB,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,CACzF,CAAC,CACA,CAAC,GAzBJwB,MAAM,CAACjE,EA0BT,CACN,CAAC,cAEF5D,IAAA,QAAK0F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,2IAA2B,CAAK,CAChE,EACE,CACN,EACE,CAAC,cAENzF,KAAA,QAAKwF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BzF,KAAA,QAAKwF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzF,KAAA,OAAAyF,QAAA,eACE3F,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACO,KAAK,CAAE,CAAEgB,OAAO,CAAE,cAAc,CAAEC,aAAa,CAAE,QAAQ,CAAEC,WAAW,CAAE,KAAM,CAAE,CAAA9B,QAAA,cAC1I3F,IAAA,SAAMkG,CAAC,CAAC,y/CAAy/C,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAAC,CAAC,CACnlD,CAAC,2BAER,EAAI,CAAC,cACLtG,IAAA,WACE0F,SAAS,CAAC,SAAS,CACnBE,OAAO,CAAEA,CAAA,GAAMxE,cAAc,CAAC,CAACD,WAAW,CAAE,CAC5CuG,KAAK,CAAC,+DAAa,CAAA/B,QAAA,cAEnB3F,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAC,4BAA4B,CAAAN,QAAA,cAC5F3F,IAAA,SAAMkG,CAAC,CAAC,kBAAkB,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,CACrF,CAAC,CACA,CAAC,EACN,CAAC,CACLlF,WAAW,eACVnB,IAAA,CAACJ,OAAO,EACN+H,QAAQ,CAAE3E,eAAgB,CAC1B4E,QAAQ,CAAEA,CAAA,GAAMxG,cAAc,CAAC,KAAK,CAAE,CACvC,CACF,CACAN,OAAO,cACNd,IAAA,CAACF,YAAY,EAAC4G,KAAK,CAAE,CAAE,CAAE,CAAC,cAE1B1G,IAAA,QAAK0F,SAAS,CAAC,UAAU,CAAAC,QAAA,CACtBV,KAAK,CAACC,OAAO,CAAC5E,IAAI,CAAC,EAAIA,IAAI,CAACqE,MAAM,CAAG,CAAC,CACrCrE,IAAI,CACD6H,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAACA,CAAC,CAACC,WAAW,EAAI,CAAC,GAAKF,CAAC,CAACE,WAAW,EAAI,CAAC,CAAC,CAAC,CAC3D3B,GAAG,CAAC4B,GAAG,eACNrI,KAAA,QAEEwF,SAAS,CAAC,kBAAkB,CAC5Ba,KAAK,CAAE,CACLiC,eAAe,CAAEhI,YAAY,CAACkD,QAAQ,CAAC6E,GAAG,CAAC3E,EAAE,CAAC,CAAI2E,GAAG,CAACR,KAAK,EAAI,SAAS,CAAI,aAAa,CACzFU,WAAW,CAAEF,GAAG,CAACR,KAAK,EAAI,SAC5B,CAAE,CAAApC,QAAA,eAEFzF,KAAA,WACEwF,SAAS,aAAAJ,MAAA,CAAc9E,YAAY,CAACkD,QAAQ,CAAC6E,GAAG,CAAC3E,EAAE,CAAC,CAAG,QAAQ,CAAG,EAAE,CAAG,CACvEgC,OAAO,CAAEA,CAAA,GAAMpC,SAAS,CAAC+E,GAAG,CAAC3E,EAAE,CAAE,CACjCoE,aAAa,CAAGlE,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,KAAK,CAAEyE,GAAG,CAAE,CACvDhC,KAAK,CAAE,CACLiC,eAAe,CAAE,aAAa,CAC9BE,MAAM,CAAE,MAAM,CACdX,KAAK,CAAEvH,YAAY,CAACkD,QAAQ,CAAC6E,GAAG,CAAC3E,EAAE,CAAC,CAAG,MAAM,CAAI2E,GAAG,CAACR,KAAK,EAAI,SAChE,CAAE,CAAApC,QAAA,EAED4C,GAAG,CAACxB,IAAI,CACR,CAACwB,GAAG,CAACD,WAAW,EAAIC,GAAG,CAACL,WAAW,EAAI,CAAC,EAAI,CAAC,eAC5ChI,KAAA,SAAMwF,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAC,GAAC,CAAC4C,GAAG,CAACD,WAAW,EAAIC,GAAG,CAACL,WAAW,EAAI,CAAC,CAAC,GAAC,EAAM,CAC9E,EACK,CAAC,cACTlI,IAAA,WACE0F,SAAS,CAAC,gBAAgB,CAC1BE,OAAO,CAAG9B,CAAC,EAAKU,eAAe,CAAC+D,GAAG,CAAC3E,EAAE,CAAEE,CAAC,CAAE,CAC3C4D,KAAK,CAAC,+DAAa,CAAA/B,QAAA,cAEnB3F,IAAA,QAAK6F,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAC,4BAA4B,CAAAN,QAAA,cAC5F3F,IAAA,SAAMkG,CAAC,CAAC,sBAAsB,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC,CACzF,CAAC,CACA,CAAC,GA9BJkC,GAAG,CAAC3E,EA+BN,CACN,CAAC,cAEJ5D,IAAA,QAAK0F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,2IAA2B,CAAK,CAChE,CACE,CACN,EACE,CACN,CACU,CAAC,EACT,CAAC,CAEZ,CAAC,CAAC,CAEFxF,OAAO,CAACwI,WAAW,CAAG,SAAS,CAE/B,cAAe,CAAAxI,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}