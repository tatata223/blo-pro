{"ast":null,"code":"import React,{useState,useEffect}from'react';import{templatesAPI}from'../../api/api';import TemplatePreview from'./TemplatePreview';import TemplateBuilder from'./TemplateBuilder';import'./TemplatesSection.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TemplatesSection=_ref=>{let{onTemplateSelect}=_ref;const[templates,setTemplates]=useState([]);const[loading,setLoading]=useState(true);const[previewTemplate,setPreviewTemplate]=useState(null);const[builderTemplate,setBuilderTemplate]=useState(null);useEffect(()=>{loadTemplates();},[]);const loadTemplates=async()=>{try{var _response$data;const response=await templatesAPI.getAll();console.log('Templates response:',response);const templatesData=Array.isArray(response.data)?response.data:((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.results)||[];setTemplates(templatesData);if(templatesData.length===0){console.warn('No templates found. Make sure templates are initialized.');}}catch(error){var _error$response;console.error('Error loading templates:',error);console.error('Error details:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);setTemplates([]);}finally{setLoading(false);}};const handleTemplateClick=template=>{// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä\nsetPreviewTemplate(template);};const handleUseTemplate=()=>{if(previewTemplate){setBuilderTemplate(previewTemplate);setPreviewTemplate(null);}};const handleSaveFromBuilder=noteData=>{// –ü–µ—Ä–µ–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç\nonTemplateSelect(noteData);setBuilderTemplate(null);};const handleCancelBuilder=()=>{setBuilderTemplate(null);};// –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç –±–∏–ª–¥–µ—Ä, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ\nif(builderTemplate){return/*#__PURE__*/_jsx(\"section\",{className:\"templates-section\",children:/*#__PURE__*/_jsx(TemplateBuilder,{template:builderTemplate,onSave:handleSaveFromBuilder,onCancel:handleCancelBuilder})});}if(loading){return/*#__PURE__*/_jsx(\"section\",{className:\"templates-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"templates-loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u043E\\u0432...\"})});}if(!Array.isArray(templates)||templates.length===0){return/*#__PURE__*/_jsxs(\"section\",{className:\"templates-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"templates-title\",children:\"\\uD83D\\uDCCB \\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\\u044B \\u0437\\u0430\\u043C\\u0435\\u0442\\u043E\\u043A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"templates-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B. \\u041E\\u0431\\u0440\\u0430\\u0442\\u0438\\u0442\\u0435\\u0441\\u044C \\u043A \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0443 \\u0434\\u043B\\u044F \\u0438\\u043D\\u0438\\u0446\\u0438\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438 \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u043E\\u0432.\"})})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"templates-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"templates-title\",children:\"\\uD83D\\uDCCB \\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\\u044B \\u0437\\u0430\\u043C\\u0435\\u0442\\u043E\\u043A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"templates-grid\",children:templates.map(template=>/*#__PURE__*/_jsxs(\"div\",{className:\"template-card\",onClick:()=>handleTemplateClick(template),children:[/*#__PURE__*/_jsx(\"div\",{className:\"template-icon\",dangerouslySetInnerHTML:{__html:template.icon_svg}}),/*#__PURE__*/_jsx(\"h3\",{className:\"template-name\",children:template.name}),template.category&&/*#__PURE__*/_jsx(\"span\",{className:\"template-category-badge\",children:template.category}),template.description&&/*#__PURE__*/_jsx(\"p\",{className:\"template-description\",children:template.description})]},template.id))})]}),previewTemplate&&/*#__PURE__*/_jsx(TemplatePreview,{template:previewTemplate,onUse:handleUseTemplate,onClose:()=>setPreviewTemplate(null)})]});};export default TemplatesSection;","map":{"version":3,"names":["React","useState","useEffect","templatesAPI","TemplatePreview","TemplateBuilder","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TemplatesSection","_ref","onTemplateSelect","templates","setTemplates","loading","setLoading","previewTemplate","setPreviewTemplate","builderTemplate","setBuilderTemplate","loadTemplates","_response$data","response","getAll","console","log","templatesData","Array","isArray","data","results","length","warn","error","_error$response","handleTemplateClick","template","handleUseTemplate","handleSaveFromBuilder","noteData","handleCancelBuilder","className","children","onSave","onCancel","map","onClick","dangerouslySetInnerHTML","__html","icon_svg","name","category","description","id","onUse","onClose"],"sources":["/Users/mikhail/Downloads/–ó–∞–º–µ—Ç–∫–∏PARADIZE/frontend/src/components/Templates/TemplatesSection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { templatesAPI } from '../../api/api';\nimport TemplatePreview from './TemplatePreview';\nimport TemplateBuilder from './TemplateBuilder';\nimport './TemplatesSection.css';\n\nconst TemplatesSection = ({ onTemplateSelect }) => {\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [previewTemplate, setPreviewTemplate] = useState(null);\n  const [builderTemplate, setBuilderTemplate] = useState(null);\n\n  useEffect(() => {\n    loadTemplates();\n  }, []);\n\n  const loadTemplates = async () => {\n    try {\n      const response = await templatesAPI.getAll();\n      console.log('Templates response:', response);\n      const templatesData = Array.isArray(response.data) ? response.data : \n                           (response.data?.results || []);\n      setTemplates(templatesData);\n      if (templatesData.length === 0) {\n        console.warn('No templates found. Make sure templates are initialized.');\n      }\n    } catch (error) {\n      console.error('Error loading templates:', error);\n      console.error('Error details:', error.response?.data);\n      setTemplates([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTemplateClick = (template) => {\n    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä\n    setPreviewTemplate(template);\n  };\n\n  const handleUseTemplate = () => {\n    if (previewTemplate) {\n      setBuilderTemplate(previewTemplate);\n      setPreviewTemplate(null);\n    }\n  };\n\n  const handleSaveFromBuilder = (noteData) => {\n    // –ü–µ—Ä–µ–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç\n    onTemplateSelect(noteData);\n    setBuilderTemplate(null);\n  };\n\n  const handleCancelBuilder = () => {\n    setBuilderTemplate(null);\n  };\n\n  // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç –±–∏–ª–¥–µ—Ä, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ\n  if (builderTemplate) {\n    return (\n      <section className=\"templates-section\">\n        <TemplateBuilder\n          template={builderTemplate}\n          onSave={handleSaveFromBuilder}\n          onCancel={handleCancelBuilder}\n        />\n      </section>\n    );\n  }\n\n  if (loading) {\n    return (\n      <section className=\"templates-section\">\n        <div className=\"templates-loading\">–ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤...</div>\n      </section>\n    );\n  }\n\n  if (!Array.isArray(templates) || templates.length === 0) {\n    return (\n      <section className=\"templates-section\">\n        <h2 className=\"templates-title\">üìã –®–∞–±–ª–æ–Ω—ã –∑–∞–º–µ—Ç–æ–∫</h2>\n        <div className=\"templates-empty\">\n          <p>–®–∞–±–ª–æ–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤.</p>\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <>\n      <section className=\"templates-section\">\n        <h2 className=\"templates-title\">üìã –®–∞–±–ª–æ–Ω—ã –∑–∞–º–µ—Ç–æ–∫</h2>\n        <div className=\"templates-grid\">\n          {templates.map(template => (\n            <div\n              key={template.id}\n              className=\"template-card\"\n              onClick={() => handleTemplateClick(template)}\n            >\n              <div className=\"template-icon\" dangerouslySetInnerHTML={{ __html: template.icon_svg }} />\n              <h3 className=\"template-name\">{template.name}</h3>\n              {template.category && (\n                <span className=\"template-category-badge\">{template.category}</span>\n              )}\n              {template.description && (\n                <p className=\"template-description\">{template.description}</p>\n              )}\n            </div>\n          ))}\n        </div>\n      </section>\n      \n      {previewTemplate && (\n        <TemplatePreview\n          template={previewTemplate}\n          onUse={handleUseTemplate}\n          onClose={() => setPreviewTemplate(null)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default TemplatesSection;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}